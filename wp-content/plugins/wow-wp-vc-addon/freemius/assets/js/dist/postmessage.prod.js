"use strict";!function(s,n){var o,i,r,a,e,t,c,p,u=this;u.FS=u.FS||{},u.FS.PostMessage=(i=new NoJQueryPostMessageMixin("postMessage","receiveMessage"),r={},a=decodeURIComponent(document.location.hash.replace(/^#/,"")),e=a.substring(0,a.indexOf("/","https://"===a.substring(0,"https://".length)?8:7)),t=""!==a,c=s(window),p=s("html"),{init:function(e,t){o=e,i.receiveMessage(function(e){var t=JSON.parse(e.data);if(r[t.type])for(var s=0;s<r[t.type].length;s++)r[t.type][s](t.data)},o),FS.PostMessage.receiveOnce("forward",function(e){window.location=e.url}),0<(t=t||[]).length&&c.on("scroll",function(){for(var e=0;e<t.length;e++)FS.PostMessage.postScroll(t[e])})},init_child:function(){this.init(e),s(window).bind("load",function(){FS.PostMessage.postHeight(),FS.PostMessage.post("loaded")})},hasParent:function(){return t},postHeight:function(e,t){e=e||0,t=t||"#wrap_section",this.post("height",{height:e+s(t).outerHeight(!0)})},postScroll:function(e){this.post("scroll",{top:c.scrollTop(),height:c.height()-parseFloat(p.css("paddingTop"))-parseFloat(p.css("marginTop"))},e)},post:function(e,t,s){console.debug("PostMessage.post",e),s?i.postMessage(JSON.stringify({type:e,data:t}),s.src,s.contentWindow):i.postMessage(JSON.stringify({type:e,data:t}),a,window.parent)},receive:function(e,t){console.debug("PostMessage.receive",e),n===r[e]&&(r[e]=[]),r[e].push(t)},receiveOnce:function(e,t){this.is_set(e)||this.receive(e,t)},is_set:function(e){return n!=r[e]},parent_url:function(){return a},parent_subdomain:function(){return e}})}(jQuery);