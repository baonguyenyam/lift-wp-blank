"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(d){var k;(k=d).Zebra_Tooltips=function(t,n){function r(o){var t,e,i,a,n,r,s,l,p,d,c,f,u,m,h=o.data("Zebra_Tooltip"),w=k(window);return h.tooltip||(t=k("<div>",{class:"Zebra_Tooltip",css:{opacity:0,display:"block"}}),e=k("<div>",{class:"Zebra_Tooltip_Message",css:{maxWidth:h.max_width}}).html(h.content).appendTo(t),i=k("<div>",{class:"Zebra_Tooltip_Arrow"}).appendTo(t),a=k("<div>").addClass("Zebra_Tooltip_Arrow_Border").appendTo(i),k("<div>").appendTo(i),h.keep_visible&&(t.on("mouseleave"+(h.close_on_click?" click":""),function(){T(o)}),t.on("mouseenter",function(){b(o)})),t.appendTo("body"),h.sticky&&e.addClass("Zebra_Tooltip_Has_Close"),n=t.outerWidth(),r=t.outerHeight(),s=a.outerWidth(),l=a.outerHeight(),p=e.outerWidth(),d=e.outerHeight(),h={tooltip:t,tooltip_width:n,tooltip_height:r+l/2,message:e,arrow_container:i,arrow_width:s,arrow_height:l,arrow:a},t.css({width:h.tooltip_width,height:h.tooltip_height}),h.tooltip_width=h.tooltip_width+(e.outerWidth()-p),h.tooltip_height=h.tooltip_height+(e.outerHeight()-d),t.css({width:h.tooltip_width,height:h.tooltip_height,display:"none"}),h=k.extend(o.data("Zebra_Tooltip"),h),o.data("Zebra_Tooltip",h)),h.sticky&&!h.close&&(k("<a>",{class:"Zebra_Tooltip_Close",href:"javascript:void(0)"}).html("&times;").on("click",function(t){t.preventDefault();var e=o.data("Zebra_Tooltip");e.sticky=!1,o.data("Zebra_Tooltip",e),T(o)}).appendTo(h.message),h.close=!0,h=k.extend(o.data("Zebra_Tooltip"),h),o.data("Zebra_Tooltip",h)),_=w.width(),g=w.height(),c=o.offset(),k.extend(h,{element_left:c.left,element_top:c.top,element_width:o.outerWidth(),element_height:o.outerHeight()}),y=w.scrollTop(),v=w.scrollLeft(),f="left"===h.position?h.element_left-h.tooltip_width+h.arrow_width:"right"===h.position?h.element_left+h.element_width-h.arrow_width:h.element_left+(h.element_width-h.tooltip_width)/2,u=h.element_top-h.tooltip_height,m="left"===h.position?h.tooltip_width-h.arrow_width-h.arrow_width/2:"right"===h.position?h.arrow_width/2:(h.tooltip_width-h.arrow_width)/2,f+h.tooltip_width>_+v&&(m-=_+v-(f+h.tooltip_width)-6,f=_+v-h.tooltip_width-6,m+h.arrow_width>h.tooltip_width-6&&(m=h.tooltip_width-6-h.arrow_width),f+m+h.arrow_width/2<h.element_left&&(m=-1e4)),f<v&&(m-=v-f,f=v+2,m<0&&(m=h.arrow_width/2),f+m+h.arrow_width/2>h.element_left+h.element_width&&(m=-1e4)),h.message.css("margin-top",""),h.arrow_container.removeClass("Zebra_Tooltip_Arrow_Top").addClass("Zebra_Tooltip_Arrow_Bottom"),u<y||"below"===h.vertical_alignment&&h.element_top+h.element_height+h.vertical_offset+h.tooltip_height+h.animation_offset<g+y?(u=h.element_top+h.element_height-h.vertical_offset,h.animation_offset=Math.abs(h.animation_offset),h.message.css("margin-top",h.arrow_height/2),h.arrow_container.removeClass("Zebra_Tooltip_Arrow_Bottom").addClass("Zebra_Tooltip_Arrow_Top")):(h.animation_offset=-Math.abs(h.animation_offset),u+=h.vertical_offset),h.arrow_container.css("left",m),h.tooltip.css({left:f,top:u}),k.extend(h,{tooltip_left:f,tooltip_top:u,arrow_left:m}),h=k.extend(o.data("Zebra_Tooltip"),h),o.data("Zebra_Tooltip",h),h}var _,g,v,y,s={animation_speed:250,animation_offset:20,close_on_click:!0,content:!(this.version="2.1.0"),hide_delay:100,keep_visible:!0,max_width:250,opacity:".95",position:"center",prerender:!1,show_delay:100,vertical_alignment:"above",vertical_offset:0,onBeforeHide:null,onHide:null,onBeforeShow:null,onShow:null},l=this,b=function(t){var e=t.data("Zebra_Tooltip");clearTimeout(e.show_timeout),e.muted||(clearTimeout(e.hide_timeout),e.show_timeout=setTimeout(function(){(e=r(t)).onBeforeShow&&"function"==typeof e.onBeforeShow&&!1===e.onBeforeShow(t,e.tooltip)||("block"!==e.tooltip.css("display")&&e.tooltip.css({top:e.tooltip_top+e.animation_offset}),e.tooltip.css("display","block"),e.tooltip.stop(),e.tooltip.animate({top:e.tooltip_top,opacity:e.opacity},e.animation_speed,function(){e.onShow&&"function"==typeof e.onShow&&e.onShow(t,e.tooltip)}))},e.show_delay))},T=function(t){var e=t.data("Zebra_Tooltip");clearTimeout(e.hide_timeout),e.sticky||(clearTimeout(e.show_timeout),e.hide_timeout=setTimeout(function(){if(e.tooltip){if(e.onBeforeHide&&"function"==typeof e.onBeforeHide&&!1===e.onBeforeHide(t,e.tooltip))return;e.close=!1,e.destroy&&(e.muted=!0),t.data("Zebra_Tooltip",e),k("a.Zebra_Tooltip_Close",e.tooltip).remove(),e.tooltip.stop(),e.tooltip.animate({opacity:0,top:e.tooltip_top+e.animation_offset},e.animation_speed,function(){k(this).css("display","none"),e.onHide&&"function"==typeof e.onHide&&e.onHide(t,e.tooltip)})}},e.hide_delay))};l.hide=function(t,o){t.each(function(){var t=k(this),e=t.data("Zebra_Tooltip");e&&(e.sticky=!1,o&&(e.destroy=!0),t.data("Zebra_Tooltip",e),T(t))})},l.show=function(t,o){t.each(function(){var t=k(this),e=t.data("Zebra_Tooltip");e&&(e.sticky=!0,e.muted=!1,o&&(e.destroy=!0),t.data("Zebra_Tooltip",e),b(t))})},t.each(function(){var t,e=k(this),o=e.attr("title"),i=e.data(),a={};for(t in i)0===t.indexOf("ztt_")&&(t=t.replace(/^ztt\_/,""),void 0!==s[t]&&(a[t]=i["ztt_"+t]));a=k.extend(s,l.settings,n,a),o&&(a.content=e.attr("title")),void 0!==a.content&&""!==a.content.trim()&&(e.on({mouseenter:function(){o&&k(this).attr("title",""),b(e)},mouseleave:function(){T(e),o&&k(this).attr("title",o)}}),e.data("Zebra_Tooltip",k.extend({tooltip:null,show_timeout:null,hide_timeout:null,sticky:!1,destroy:!1,muted:!1},a)),a.prerender&&r(e))})};function c(o,i){var t;void 0===i&&(i=d('input[name="log"], input[name="user_login"], input[name=username]')),"object"===("undefined"==typeof grecaptcha?"undefined":_typeof(grecaptcha))?grecaptcha.ready(function(){grecaptcha.execute(WFLSVars.recaptchasitekey,{action:"login"}).then(function(t){var e=d("#wfls-captcha-token");e.length?e.val(t):i.length&&((e=d('<input type="hidden" name="wfls-captcha-token" id="wfls-captcha-token" />')).val(t),i.parent().append(e)),"function"==typeof o&&o(!0)})}):((t=d("#wfls-captcha-token")).length?t.val("grecaptcha-missing"):i.length&&((t=d('<input type="hidden" name="wfls-captcha-token" id="wfls-captcha-token" />')).val("grecaptcha-missing"),i.parent().append(t)),"function"==typeof o&&o(!0))}function f(t,e){var o,i,a,n=d("#login > h1");0<n.length?((o=d("error"===e?'<div id="login_error">':'<p class="message">')).addClass("wfls-login-message"),o.html(t),n.after(o),o.get(0).scrollIntoView()):0<d(".woocommerce").length?(i=d('<div class="woocommerce wfls-login-message">'),a=d('<ul role="alert">').addClass("error"===e?"woocommerce-error":"woocommerce-info"),i.append(a),a.append(d("<li>").html(t)),d("#primary").before(i),i.get(0).scrollIntoView()):alert(message)}function u(){d(".wfls-registration-captcha-contact").on("click",function(t){t.preventDefault(),t.stopPropagation();var e,o,i,a,n,r=d('input[name="user_login"], #reg_email');r.length&&(d("#wfls-prompt-overlay").remove(),e=d('<div id="wfls-prompt-overlay"></div>'),o=d('<div id="wfls-prompt-wrapper"></div>'),i=d('<p><label for="wfls-message">Message to Support</label><br/><textarea name="wfls-message" id="wfls-message" class="wfls-textarea"></textarea></p>'),a=d('<input type="hidden" name="wfls-message-nonce" id="wfls-message-nonce"/>'),n=d('<p class="submit"><input type="submit" name="wfls-support-submit" id="wfls-support-submit" class="button button-primary button-large" value="Send"/></p>'),o.append(i).append(a).append(n),e.append(o),r.closest("form").css("position","relative").append(e),d("#wfls-message-nonce").val(d(this).data("token")),d("#wfls-support-submit").on("click",function(t){t.preventDefault(),t.stopPropagation(),d("#login_error, p.message").remove();var e=r.closest("form").serialize();e+="&action=wordfence_ls_register_support",d.ajax({type:"POST",url:WFLSVars.ajaxurl,dataType:"json",data:e,success:function(t){var e;t.hasOwnProperty("error")?(f(t.error,"error"),e=d('<div id="login_error">'+t.error+"</div>"),d("#login > h1").after(e)):t.hasOwnProperty("message")&&(f(t.message,"message"),e=d('<p class="message">'+t.message+"</p>"),d("#login > h1").after(e),d("#wfls-support-submit, #wfls-message").attr("disabled",!0))},error:function(){f("An error was encountered while trying to send the message. Please try again.","error");var t=d('<div id="login_error"><strong>ERROR</strong>: An error was encountered while trying to send the message. Please try again.</div>');d("#login > h1").after(t)}})}),i.find("#wfls-message").focus())})}function m(){d(".wfls-login-message").remove();var t,e=d('input[name="log"],input[name=username]'),o=d('input[name="pwd"],input[name=password]'),p=null;e.length&&o.length&&(p=e.closest("form")),null!==p?(t=d(p).serialize(),t+="&action=wordfence_ls_authenticate",d.ajax({type:"POST",url:WFLSVars.ajaxurl,dataType:"json",data:t,success:function(t){if(p.data("wflsLoggingIn",0),t.hasOwnProperty("reset")&&t.reset&&d("#wfls-prompt-overlay, #wfls-token-jwt").remove(),t.hasOwnProperty("error"))f(t.error,"error"),d("#wfls-token").val(""),parseInt(WFLSVars.useCAPTCHA)&&c();else if(t.hasOwnProperty("message"))f(t.message,"message"),d("#wfls-token").val(""),parseInt(WFLSVars.useCAPTCHA)&&c();else if(t.hasOwnProperty("login")){var e;if(t.hasOwnProperty("captcha")&&((e=d("#wfls-captcha-jwt")).length||(e=d('<input type="hidden" name="wfls-captcha-jwt" id="wfls-captcha-jwt" value=""/>'),p.append(e)),d("#wfls-captcha-jwt").val(t.captcha)),parseInt(WFLSVars.useCAPTCHA)&&(c(),u()),t.hasOwnProperty("jwt")){var o,i,a,n,r,s,l=d("#wfls-token-jwt");if(l.length||(l=d('<input type="hidden" name="wfls-token-jwt" id="wfls-token-jwt" value=""/>'),p.append(l)),d("#wfls-token-jwt").val(t.jwt),parseInt(WFLSVars.useCAPTCHA)&&(c(),u()),t.hasOwnProperty("combined"))return p.data("wflsLoggingIn",1),void d("#wp-submit,[type=submit][name=login]").trigger("click");d("#wfls-token").length||(o=d('<div id="wfls-prompt-overlay"></div>'),i=d('<div id="wfls-prompt-wrapper"></div>'),a=d('<p><label for="wfls-token">2FA Code <a href="javascript:void(0)" class="wfls-2fa-code-help wfls-tooltip-trigger" title="The 2FA Code can be found within the authenticator app you used when first activating two-factor authentication. You may also use one of your recovery codes."><i class="dashicons dashicons-editor-help"></i></a></label></p>'),n=d('<p><input type="text" name="wfls-token" id="wfls-token" aria-describedby="wfls-token-error" class="input" value="" size="6" autocomplete="off"/></p>'),r=d('<p class="wfls-remember-device-wrapper"><label for="wfls-remember-device"><input name="wfls-remember-device" type="checkbox" id="wfls-remember-device" value="1" /> Remember for 30 days</label></p>'),s=d('<p class="submit"><input type="submit" name="wfls-token-submit" id="wfls-token-submit" class="button button-primary button-large" value="Log In"/></p>'),i.append(a),i.append(n),parseInt(WFLSVars.allowremember)&&i.append(r),i.append(s),o.append(i),p.css("position","relative").append(o),new d.Zebra_Tooltips(d(".wfls-tooltip-trigger")),d("#wfls-token-submit").on("click",function(t){t.preventDefault(),t.stopPropagation(),m()})),d("#wfls-token").focus()}else p.data("wflsLoggingIn",1),d("#wp-submit,[type=submit][name=login]").trigger("click")}},error:function(t){503!=t.status&&403!=t.status?f("<strong>ERROR</strong>: An error was encountered while trying to authenticate. Please try again.","error"):window.location.reload(!0)}})):console.log("Expected fields not found, try reloading page.")}d(function(){var i=d('input[name="log"],input[name=username]'),t=d('input[name="pwd"],input[name=password]');i.length&&t.length&&i.closest("form").on("submit",function(t){var e=!!parseInt(d(this).data("wflsLoggingIn"));d(this).data("wflsLoggingIn",0),e||(t.preventDefault(),t.stopPropagation(),parseInt(WFLSVars.useCAPTCHA)?c(function(){m()}):m())}),(i=d('input[name="user_login"], #reg_email')).length&&i.closest("form").on("submit",function(t){var e=d(this),o=!!parseInt(e.data("wflsRegistering"));e.data("wflsRegistering",0),!o&&parseInt(WFLSVars.useCAPTCHA)&&(t.preventDefault(),t.stopPropagation(),e.data("wflsRegistering",1),c(function(){e.find("[type=submit]").first().trigger("click")},i))});var e=d("#wfls-email-verification");e.length?e.val(WFLSVars.verification):(i=d('input[name="log"], input[name="user_login"], input[name=username], #reg_email')).length&&((e=d('<input type="hidden" name="wfls-email-verification" id="wfls-email-verification" />')).val(WFLSVars.verification),i.parent().append(e)),parseInt(WFLSVars.useCAPTCHA)&&u()})}(jQuery);