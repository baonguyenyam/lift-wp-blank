"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(n){var s={};function o(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=s,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==_typeof(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=350)}({0:function(e){e.exports=window.wp.element},1:function(e){e.exports=window.yoast.propTypes},100:function(e){e.exports=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],s=!0,o=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(s=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(e){o=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(o)throw r}}return n}}},101:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},11:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},117:function(e){e.exports=window.wp.blocks},12:function(e){e.exports=window.yoast.styledComponents},121:function(e){e.exports=window.wp.isShallowEqual},129:function(e){e.exports=window.wp.blockEditor},13:function(e,t,n){var s=n(70);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}},14:function(e,t,n){var s=n(34),o=n(11);e.exports=function(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?o(e):t}},15:function(e){e.exports=function(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}},18:function(e){e.exports=window.wp.components},194:function(e){e.exports=window.wp.editor},2:function(e){e.exports=window.lodash},203:function(e){e.exports=window.wp.a11y},27:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},t.apply(this,arguments)}e.exports=t},3:function(e){e.exports=window.wp.i18n},30:function(e,t,n){var s=n(87),o=n(88),r=n(89);e.exports=function(e){return s(e)||o(e)||r()}},34:function(t){function n(e){return"function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?t.exports=n=function(e){return _typeof(e)}:t.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},n(e)}t.exports=n},350:function(e,t,n){n.r(t);var k=n(0),S=n(3),s=n(117),o=n(27),v=n.n(o),r=n(39),c=n.n(r),i=n(5),a=n.n(i),u=n(7),l=n.n(u),p=n(11),d=n.n(p),h=n(13),m=n.n(h),f=n(14),b=n.n(f),y=n(8),w=n.n(y),g=n(15),j=n.n(g),O=n(1),x=n.n(O),_=n(12),C=n.n(_),E=n(203),q=n(2),N=function(r){return function(e){m()(n,e);var s,o,t=(s=n,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t,n=w()(s);return t=o?(e=w()(this).constructor,Reflect.construct(n,arguments,e)):n.apply(this,arguments),b()(this,t)});function n(){return a()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){return Object(k.createElement)(k.Fragment,null,Object(k.createElement)(r,this.props)," ")}}]),n}(k.Component)},D=n(121),T=n(18),F=n(129),R=N(F.RichText),A=N(F.RichText.Content),Q=function(e){m()(r,e);var s,o,n=(s=r,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t,n=w()(s);return t=o?(e=w()(this).constructor,Reflect.construct(n,arguments,e)):n.apply(this,arguments),b()(this,t)});function r(e){var t;return a()(this,r),(t=n.call(this,e)).onSelectImage=t.onSelectImage.bind(d()(t)),t.onInsertStep=t.onInsertStep.bind(d()(t)),t.onRemoveStep=t.onRemoveStep.bind(d()(t)),t.onMoveStepUp=t.onMoveStepUp.bind(d()(t)),t.onMoveStepDown=t.onMoveStepDown.bind(d()(t)),t.onFocusText=t.onFocusText.bind(d()(t)),t.onFocusTitle=t.onFocusTitle.bind(d()(t)),t.onChangeTitle=t.onChangeTitle.bind(d()(t)),t.onChangeText=t.onChangeText.bind(d()(t)),t}return l()(r,[{key:"onInsertStep",value:function(){this.props.insertStep(this.props.index)}},{key:"onRemoveStep",value:function(){this.props.removeStep(this.props.index)}},{key:"onMoveStepUp",value:function(){this.props.isFirst||this.props.onMoveUp(this.props.index)}},{key:"onMoveStepDown",value:function(){this.props.isLast||this.props.onMoveDown(this.props.index)}},{key:"onFocusTitle",value:function(){this.props.onFocus(this.props.index,"name")}},{key:"onFocusText",value:function(){this.props.onFocus(this.props.index,"text")}},{key:"onChangeTitle",value:function(e){var t=this.props,n=t.onChange,s=t.index,o=t.step,r=o.text;n(e,r,o.name,r,s)}},{key:"onChangeText",value:function(e){var t=this.props,n=t.onChange,s=t.index,o=t.step,r=o.text,i=o.name;n(i,e,i,r,s)}},{key:"getMediaUploadButton",value:function(e){return Object(k.createElement)(T.IconButton,{className:"schema-how-to-step-button how-to-step-add-media",icon:"insert",onClick:e.open},Object(S.__)("Add image","wordpress-seo"))}},{key:"getButtons",value:function(){var e=this.props.step;return Object(k.createElement)("div",{className:"schema-how-to-step-button-container"},!r.getImageSrc(e.text)&&Object(k.createElement)(F.MediaUpload,{onSelect:this.onSelectImage,allowedTypes:["image"],value:e.id,render:this.getMediaUploadButton}),Object(k.createElement)(T.IconButton,{className:"schema-how-to-step-button",icon:"trash",label:Object(S.__)("Delete step","wordpress-seo"),onClick:this.onRemoveStep}),Object(k.createElement)(T.IconButton,{className:"schema-how-to-step-button",icon:"insert",label:Object(S.__)("Insert step","wordpress-seo"),onClick:this.onInsertStep}))}},{key:"getMover",value:function(){return Object(k.createElement)("div",{className:"schema-how-to-step-mover"},Object(k.createElement)(T.IconButton,{className:"editor-block-mover__control",onClick:this.onMoveStepUp,icon:"arrow-up-alt2",label:Object(S.__)("Move step up","wordpress-seo"),"aria-disabled":this.props.isFirst}),Object(k.createElement)(T.IconButton,{className:"editor-block-mover__control",onClick:this.onMoveStepDown,icon:"arrow-down-alt2",label:Object(S.__)("Move step down","wordpress-seo"),"aria-disabled":this.props.isLast}))}},{key:"onSelectImage",value:function(e){var t=this.props,n=t.index,s=t.step,o=s.name,r=s.text,i=r.slice(),a=Object(k.createElement)("img",{key:e.id,alt:e.alt,src:e.url});i.push?i.push(a):i=[i,a],this.props.onChange(o,i,o,r,n)}},{key:"shouldComponentUpdate",value:function(e){return!Object(D.isShallowEqualObjects)(e,this.props)}},{key:"render",value:function(){var e=this.props,t=e.index,n=e.step,s=e.isSelected,o=e.subElement,r=e.isUnorderedList,i=n.id,a=n.name,c=n.text;return Object(k.createElement)("li",{className:"schema-how-to-step",key:i},Object(k.createElement)("span",{className:"schema-how-to-step-number"},r?"â€¢":t+1+"."),Object(k.createElement)(R,{className:"schema-how-to-step-name",tagName:"p",key:"".concat(i,"-name"),value:a,onChange:this.onChangeTitle,isSelected:s&&"name"===o,placeholder:Object(S.__)("Enter a step title","wordpress-seo"),unstableOnFocus:this.onFocusTitle,keepPlaceholderOnFocus:!0,formattingControls:["italic","strikethrough","link"]}),Object(k.createElement)(R,{className:"schema-how-to-step-text",tagName:"p",key:"".concat(i,"-text"),value:c,onChange:this.onChangeText,isSelected:s&&"text"===o,placeholder:Object(S.__)("Enter a step description","wordpress-seo"),unstableOnFocus:this.onFocusText,keepPlaceholderOnFocus:!0}),s&&Object(k.createElement)("div",{className:"schema-how-to-step-controls-container"},this.getMover(),this.getButtons()))}}],[{key:"getImageSrc",value:function(e){if(!e||!e.filter)return!1;var t=e.filter(function(e){return e&&e.type&&"img"===e.type})[0];return!!t&&t.props.src}},{key:"Content",value:function(e){return Object(k.createElement)("li",{className:"schema-how-to-step",id:e.id,key:e.id},Object(k.createElement)(A,{tagName:"strong",className:"schema-how-to-step-name",key:e.id+"-name",value:e.name}),Object(k.createElement)(A,{tagName:"p",className:"schema-how-to-step-text",key:e.id+"-text",value:e.text}))}}]),r}(k.Component);Q.propTypes={index:x.a.number.isRequired,step:x.a.object.isRequired,onChange:x.a.func.isRequired,insertStep:x.a.func.isRequired,removeStep:x.a.func.isRequired,onFocus:x.a.func.isRequired,onMoveUp:x.a.func.isRequired,onMoveDown:x.a.func.isRequired,subElement:x.a.string,isSelected:x.a.bool.isRequired,isFirst:x.a.bool.isRequired,isLast:x.a.bool.isRequired,isUnorderedList:x.a.bool},Q.defaultProps={isUnorderedList:!1,subElement:""};var I,M=n(30),B=n.n(M);function L(e,t){var n=1<arguments.length&&void 0!==t?t:0;return parseInt(e,10)||n}var U=N(F.RichText.Content),P=C()(T.TextControl)(I=I||j()(["\n\t&&& {\n\t\tmargin-bottom: 32px;\n\t}\n"])),H=function(e){m()(O,e);var s,o,r=(s=O,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t,n=w()(s);return t=o?(e=w()(this).constructor,Reflect.construct(n,arguments,e)):n.apply(this,arguments),b()(this,t)});function O(e){var t;a()(this,O),(t=r.call(this,e)).state={focus:""},t.changeStep=t.changeStep.bind(d()(t)),t.insertStep=t.insertStep.bind(d()(t)),t.removeStep=t.removeStep.bind(d()(t)),t.swapSteps=t.swapSteps.bind(d()(t)),t.setFocus=t.setFocus.bind(d()(t)),t.addCSSClasses=t.addCSSClasses.bind(d()(t)),t.getListTypeHelp=t.getListTypeHelp.bind(d()(t)),t.toggleListType=t.toggleListType.bind(d()(t)),t.setDurationText=t.setDurationText.bind(d()(t)),t.setFocusToStep=t.setFocusToStep.bind(d()(t)),t.moveStepUp=t.moveStepUp.bind(d()(t)),t.moveStepDown=t.moveStepDown.bind(d()(t)),t.focusDescription=t.focusDescription.bind(d()(t)),t.addDuration=t.addDuration.bind(d()(t)),t.removeDuration=t.removeDuration.bind(d()(t)),t.onChangeDescription=t.onChangeDescription.bind(d()(t)),t.onChangeDays=t.onChangeDays.bind(d()(t)),t.onChangeHours=t.onChangeHours.bind(d()(t)),t.onChangeMinutes=t.onChangeMinutes.bind(d()(t)),t.onAddStepButtonClick=t.onAddStepButtonClick.bind(d()(t)),t.daysInput=Object(k.createRef)(),t.addDurationButton=Object(k.createRef)();var n=t.getDefaultDurationText();return t.setDefaultDurationText(n),t}return l()(O,[{key:"getDefaultDurationText",value:function(){var e=Object(q.get)(window,"wp.hooks.applyFilters"),t=Object(S.__)("Time needed:","wordpress-seo");return e&&(t=e("wpseo_duration_text",t)),t}},{key:"setDurationText",value:function(e){this.props.setAttributes({durationText:e})}},{key:"setDefaultDurationText",value:function(e){this.props.setAttributes({defaultDurationText:e})}},{key:"onAddStepButtonClick",value:function(){this.insertStep(null,[],[],!1)}},{key:"changeStep",value:function(e,t,n,s,o){var r,i=this.props.attributes.steps?this.props.attributes.steps.slice():[];o>=i.length||i[o].name!==n||i[o].text!==s||(i[o]={id:i[o].id,name:e,text:t,jsonName:Object(k.renderToString)(e),jsonText:Object(k.renderToString)(t)},(r=Q.getImageSrc(t))&&(i[o].jsonImageSrc=r),this.props.setAttributes({steps:i}))}},{key:"insertStep",value:function(e,t,n,s){var o=0<arguments.length&&void 0!==e?e:null,r=1<arguments.length&&void 0!==t?t:[],i=2<arguments.length&&void 0!==n?n:[],a=!(3<arguments.length&&void 0!==s)||s,c=this.props.attributes.steps?this.props.attributes.steps.slice():[];null===o&&(o=c.length-1),c.splice(o+1,0,{id:O.generateId("how-to-step"),name:r,text:i,jsonName:"",jsonText:""}),this.props.setAttributes({steps:c}),a?setTimeout(this.setFocus.bind(this,"".concat(o+1,":name"))):Object(E.speak)(Object(S.__)("New step added","wordpress-seo"))}},{key:"swapSteps",value:function(e,t){var n=this.props.attributes.steps?this.props.attributes.steps.slice():[],s=n[e];n[e]=n[t],n[t]=s,this.props.setAttributes({steps:n});var o=this.state.focus.split(":"),r=c()(o,2),i=r[0],a=r[1];i==="".concat(e)&&this.setFocus("".concat(t,":").concat(a)),i==="".concat(t)&&this.setFocus("".concat(e,":").concat(a))}},{key:"removeStep",value:function(e){var t=this.props.attributes.steps?this.props.attributes.steps.slice():[];t.splice(e,1),this.props.setAttributes({steps:t});var n="description";t[e]?n="".concat(e,":name"):t[e-1]&&(n="".concat(e-1,":text")),this.setFocus(n)}},{key:"setFocus",value:function(e){e!==this.state.focus&&this.setState({focus:e})}},{key:"setFocusToStep",value:function(e,t){this.setFocus("".concat(e,":").concat(t))}},{key:"moveStepUp",value:function(e){this.swapSteps(e,e-1)}},{key:"moveStepDown",value:function(e){this.swapSteps(e,e+1)}},{key:"getSteps",value:function(){var n=this;if(!this.props.attributes.steps)return null;var e=this.state.focus.split(":"),t=c()(e,2),s=t[0],o=t[1];return this.props.attributes.steps.map(function(e,t){return Object(k.createElement)(Q,{key:e.id,step:e,index:t,onChange:n.changeStep,insertStep:n.insertStep,removeStep:n.removeStep,onFocus:n.setFocusToStep,subElement:o,onMoveUp:n.moveStepUp,onMoveDown:n.moveStepDown,isFirst:0===t,isLast:t===n.props.attributes.steps.length-1,isSelected:s==="".concat(t),isUnorderedList:n.props.attributes.unorderedList})})}},{key:"formatDuration",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:null;if(""===e)return"";var s=e.replace(/^[0]+/,"");return""===s?0:null!==n?Math.min(Math.max(0,parseInt(s,10)),n):Math.max(0,parseInt(s,10))}},{key:"getAddStepButton",value:function(){return Object(k.createElement)(T.IconButton,{icon:"insert",onClick:this.onAddStepButtonClick,className:"schema-how-to-add-step"},Object(S.__)("Add step","wordpress-seo"))}},{key:"addCSSClasses",value:function(e){this.props.setAttributes({additionalListCssClasses:e})}},{key:"toggleListType",value:function(e){this.props.setAttributes({unorderedList:e})}},{key:"getListTypeHelp",value:function(e){return e?Object(S.__)("Showing step items as an unordered list","wordpress-seo"):Object(S.__)("Showing step items as an ordered list.","wordpress-seo")}},{key:"focusDescription",value:function(){this.setFocus("description")}},{key:"onChangeDescription",value:function(e){this.props.setAttributes({description:e,jsonDescription:Object(k.renderToString)(e)})}},{key:"addDuration",value:function(){var e=this;this.props.setAttributes({hasDuration:!0}),setTimeout(function(){return e.daysInput.current.focus()})}},{key:"removeDuration",value:function(){var e=this;this.props.setAttributes({hasDuration:!1}),setTimeout(function(){e.addDurationButton.current instanceof k.Component||e.addDurationButton.current.focus()})}},{key:"onChangeDays",value:function(e){var t=this.formatDuration(e.target.value);this.props.setAttributes({days:Object(q.toString)(t)})}},{key:"onChangeHours",value:function(e){var t=this.formatDuration(e.target.value,23);this.props.setAttributes({hours:Object(q.toString)(t)})}},{key:"onChangeMinutes",value:function(e){var t=this.formatDuration(e.target.value,59);this.props.setAttributes({minutes:Object(q.toString)(t)})}},{key:"getDuration",value:function(){var e=this.props.attributes;return e.hasDuration?Object(k.createElement)("fieldset",{className:"schema-how-to-duration"},Object(k.createElement)("span",{className:"schema-how-to-duration-flex-container",role:"presentation"},Object(k.createElement)("legend",{className:"schema-how-to-duration-legend"},e.durationText||this.getDefaultDurationText()),Object(k.createElement)("span",{className:"schema-how-to-duration-time-input"},Object(k.createElement)("label",{htmlFor:"schema-how-to-duration-days",className:"screen-reader-text"},Object(S.__)("days","wordpress-seo")),Object(k.createElement)("input",{id:"schema-how-to-duration-days",className:"schema-how-to-duration-input",type:"number",value:e.days,onChange:this.onChangeDays,placeholder:"DD",ref:this.daysInput}),Object(k.createElement)("label",{htmlFor:"schema-how-to-duration-hours",className:"screen-reader-text"},Object(S.__)("hours","wordpress-seo")),Object(k.createElement)("input",{id:"schema-how-to-duration-hours",className:"schema-how-to-duration-input",type:"number",value:e.hours,onChange:this.onChangeHours,placeholder:"HH"}),Object(k.createElement)("span",{"aria-hidden":"true"},":"),Object(k.createElement)("label",{htmlFor:"schema-how-to-duration-minutes",className:"screen-reader-text"},Object(S.__)("minutes","wordpress-seo")),Object(k.createElement)("input",{id:"schema-how-to-duration-minutes",className:"schema-how-to-duration-input",type:"number",value:e.minutes,onChange:this.onChangeMinutes,placeholder:"MM"}),Object(k.createElement)(T.IconButton,{className:"schema-how-to-duration-delete-button",icon:"trash",label:Object(S.__)("Delete total time","wordpress-seo"),onClick:this.removeDuration})))):Object(k.createElement)(T.IconButton,{onClick:this.addDuration,className:"schema-how-to-duration-button",ref:this.addDurationButton,icon:"insert"},Object(S.__)("Add total time","wordpress-seo"))}},{key:"getSidebar",value:function(e,t,n){return n===this.getDefaultDurationText()&&(n=""),Object(k.createElement)(F.InspectorControls,null,Object(k.createElement)(T.PanelBody,{title:Object(S.__)("Settings","wordpress-seo"),className:"blocks-font-size"},Object(k.createElement)(P,{label:Object(S.__)("CSS class(es) to apply to the steps","wordpress-seo"),value:t,onChange:this.addCSSClasses,help:Object(S.__)("Optional. This can give you better control over the styling of the steps.","wordpress-seo")}),Object(k.createElement)(P,{label:Object(S.__)("Describe the duration of the instruction:","wordpress-seo"),value:n,onChange:this.setDurationText,help:Object(S.__)("Optional. Customize how you want to describe the duration of the instruction","wordpress-seo"),placeholder:this.getDefaultDurationText()}),Object(k.createElement)(T.ToggleControl,{label:Object(S.__)("Unordered list","wordpress-seo"),checked:e||!1,onChange:this.toggleListType,help:this.getListTypeHelp})))}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=["schema-how-to",e.className].filter(function(e){return e}).join(" "),s=["schema-how-to-steps",t.additionalListCssClasses].filter(function(e){return e}).join(" ");return Object(k.createElement)("div",{className:n},this.getDuration(),Object(k.createElement)(F.RichText,{tagName:"p",className:"schema-how-to-description",value:t.description,isSelected:"description"===this.state.focus,unstableOnFocus:this.focusDescription,onChange:this.onChangeDescription,placeholder:Object(S.__)("Enter a description","wordpress-seo"),keepPlaceholderOnFocus:!0}),Object(k.createElement)("ul",{className:s},this.getSteps()),Object(k.createElement)("div",{className:"schema-how-to-buttons"},this.getAddStepButton()),this.getSidebar(t.unorderedList,t.additionalListCssClasses,t.durationText))}}],[{key:"generateId",value:function(e){return"".concat(e,"-").concat((new Date).getTime())}},{key:"getStepsContent",value:function(e){return e?e.map(function(e){return Object(k.createElement)(Q.Content,v()({},e,{key:e.id}))}):null}},{key:"Content",value:function(e){var t,n,s,o,r,i,a,c=e.steps,u=e.hasDuration,l=e.days,p=e.hours,d=e.minutes,h=e.description,m=e.unorderedList,f=e.additionalListCssClasses,b=e.className,v=e.durationText,y=e.defaultDurationText,w=["schema-how-to",b].filter(function(e){return e}).join(" "),g=["schema-how-to-steps",f].filter(function(e){return e}).join(" "),j=(o=(n={days:L((t={days:l,hours:p,minutes:d}).days),hours:L(t.hours),minutes:L(t.minutes)}).hours,r=n.minutes,i=[],0!==(s=n.days)&&i.push(Object(S.sprintf)(Object(S._n)("%d day","%d days",s,"wordpress-seo"),s)),0!==o&&i.push(Object(S.sprintf)(Object(S._n)("%d hour","%d hours",o,"wordpress-seo"),o)),0!==r&&i.push(Object(S.sprintf)(Object(S._n)("%d minute","%d minutes",r,"wordpress-seo"),r)),1===(a=i).length?a[0]:2===a.length?S.sprintf.apply(void 0,[Object(S.__)("%s and %s","wordpress-seo")].concat(B()(a))):3===a.length?S.sprintf.apply(void 0,[Object(S.__)("%s, %s and %s","wordpress-seo")].concat(B()(a))):"");return Object(k.createElement)("div",{className:w},u&&"string"==typeof j&&0<j.length&&Object(k.createElement)("p",{className:"schema-how-to-total-time"},Object(k.createElement)("span",{className:"schema-how-to-duration-time-text"},v||y,"Â "),j+". "),Object(k.createElement)(U,{tagName:"p",className:"schema-how-to-description",value:h}),m?Object(k.createElement)("ul",{className:g},O.getStepsContent(c)):Object(k.createElement)("ol",{className:g},O.getStepsContent(c)))}}]),O}(k.Component);function z(e,t){var n=1<arguments.length&&void 0!==t?t:0;return parseInt(e,10)||n}function Y(e){var t,n,s,o,r,i=(s=(t={days:z(e.days),hours:z(e.hours),minutes:z(e.minutes)}).hours,o=t.minutes,r=[],0!==(n=t.days)&&r.push(Object(S.sprintf)(Object(S._n)("%d day","%d days",n,"wordpress-seo"),n)),0!==s&&r.push(Object(S.sprintf)(Object(S._n)("%d hour","%d hours",s,"wordpress-seo"),s)),0!==o&&r.push(Object(S.sprintf)(Object(S._n)("%d minute","%d minutes",o,"wordpress-seo"),o)),r);return 1===i.length?i[0]:2===i.length?S.sprintf.apply(void 0,[Object(S.__)("%s and %s","wordpress-seo")].concat(B()(i))):3===i.length?S.sprintf.apply(void 0,[Object(S.__)("%s, %s and %s","wordpress-seo")].concat(B()(i))):""}H.propTypes={attributes:x.a.object.isRequired,setAttributes:x.a.func.isRequired,className:x.a.string},H.defaultProps={className:""};function G(e){return Object(k.createElement)("li",{className:"schema-how-to-step",key:e.id},Object(k.createElement)("strong",{className:"schema-how-to-step-name",key:e.id+"-name"},e.name)," ",Object(k.createElement)("p",{className:"schema-how-to-step-text",key:e.id+"-text"},e.text)," ")}function J(e){var t=e.attributes.steps,n=e.attributes,s=n.hasDuration,o=n.days,r=n.hours,i=n.minutes,a=n.description,c=n.unorderedList,u=n.additionalListCssClasses,l=n.className,t=t?t.map(function(e){return Object(k.createElement)(G,v()({},e,{key:e.id}))}):null,p=["schema-how-to",l].filter(function(e){return e}).join(" "),d=["schema-how-to-steps",u].filter(function(e){return e}).join(" "),h=Y({days:o,hours:r,minutes:i});return Object(k.createElement)("div",{className:p},s&&"string"==typeof h&&0<h.length&&Object(k.createElement)("p",{className:"schema-how-to-total-time"},Object(S.__)("Time needed:","wordpress-seo"),"Â ",h+". "),Object(k.createElement)("p",{className:"schema-how-to-description"},a)," ",c?Object(k.createElement)("ul",{className:d},t):Object(k.createElement)("ol",{className:d},t))}function K(e){return Object(k.createElement)("li",{className:"schema-how-to-step",key:e.id},Object(k.createElement)("strong",{className:"schema-how-to-step-name",key:e.id+"-name"},e.name)," ",Object(k.createElement)("p",{className:"schema-how-to-step-text",key:e.id+"-text"},e.text)," ")}function V(e){var t=e.attributes,n=t.steps,s=t.hasDuration,o=t.days,r=t.hours,i=t.minutes,a=t.description,c=t.unorderedList,u=t.additionalListCssClasses,l=t.className,p=t.durationText,d=t.defaultDurationText,h=["schema-how-to",l].filter(function(e){return e}).join(" "),m=["schema-how-to-steps",u].filter(function(e){return e}).join(" "),f=Y({days:o,hours:r,minutes:i}),b=n.map(function(e){return Object(k.createElement)(K,v()({},e,{key:e.id}))});return Object(k.createElement)("div",{className:h},s&&"string"==typeof f&&0<f.length&&Object(k.createElement)("p",{className:"schema-how-to-total-time"},Object(k.createElement)("span",{className:"schema-how-to-duration-time-text"},p||d,"Â "),f+". "),Object(k.createElement)("p",{className:"schema-how-to-description"},a)," ",c?Object(k.createElement)("ul",{className:m},b):Object(k.createElement)("ol",{className:m},b))}J.propTypes={attributes:x.a.object},V.propTypes={attributes:x.a.object.isRequired};var W={v8_2:J,v11_4:V},X={hasDuration:{type:"boolean"},days:{type:"string"},hours:{type:"string"},minutes:{type:"string"},description:{type:"array",source:"children",selector:".schema-how-to-description"},jsonDescription:{type:"string"},steps:{type:"array"},additionalListCssClasses:{type:"string"},unorderedList:{type:"boolean"},durationText:{type:"string"},defaultDurationText:{type:"string"}},Z=n(194),$=N(Z.RichText.Content),ee=function(e){m()(r,e);var s,o,n=(s=r,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t,n=w()(s);return t=o?(e=w()(this).constructor,Reflect.construct(n,arguments,e)):n.apply(this,arguments),b()(this,t)});function r(e){var t;return a()(this,r),(t=n.call(this,e)).onSelectImage=t.onSelectImage.bind(d()(t)),t.onFocusAnswer=t.onFocusAnswer.bind(d()(t)),t.onFocusQuestion=t.onFocusQuestion.bind(d()(t)),t.onChangeAnswer=t.onChangeAnswer.bind(d()(t)),t.onChangeQuestion=t.onChangeQuestion.bind(d()(t)),t.onInsertQuestion=t.onInsertQuestion.bind(d()(t)),t.onRemoveQuestion=t.onRemoveQuestion.bind(d()(t)),t.onMoveDown=t.onMoveDown.bind(d()(t)),t.onMoveUp=t.onMoveUp.bind(d()(t)),t}return l()(r,[{key:"getMediaUploadButton",value:function(e){return Object(k.createElement)(T.IconButton,{className:"schema-faq-section-button faq-section-add-media",icon:"insert",onClick:e.open},Object(S.__)("Add image","wordpress-seo"))}},{key:"onFocusQuestion",value:function(){this.props.onFocus("question",this.props.index)}},{key:"onFocusAnswer",value:function(){this.props.onFocus("answer",this.props.index)}},{key:"onChangeQuestion",value:function(e){var t=this.props,n=t.index,s=t.onChange,o=t.attributes,r=o.answer;s(e,r,o.question,r,n)}},{key:"onChangeAnswer",value:function(e){var t=this.props,n=t.index,s=t.onChange,o=t.attributes,r=o.answer,i=o.question;s(i,e,i,r,n)}},{key:"onInsertQuestion",value:function(){this.props.insertQuestion(this.props.index)}},{key:"onRemoveQuestion",value:function(){this.props.removeQuestion(this.props.index)}},{key:"onMoveUp",value:function(){this.props.isFirst||this.props.onMoveUp(this.props.index)}},{key:"onMoveDown",value:function(){this.props.isLast||this.props.onMoveDown(this.props.index)}},{key:"getButtons",value:function(){var e=this.props.attributes;return Object(k.createElement)("div",{className:"schema-faq-section-button-container"},Object(k.createElement)(Z.MediaUpload,{onSelect:this.onSelectImage,allowedTypes:["image"],value:e.id,render:this.getMediaUploadButton}),Object(k.createElement)(T.IconButton,{className:"schema-faq-section-button",icon:"trash",label:Object(S.__)("Delete question","wordpress-seo"),onClick:this.onRemoveQuestion}),Object(k.createElement)(T.IconButton,{className:"schema-faq-section-button",icon:"insert",label:Object(S.__)("Insert question","wordpress-seo"),onClick:this.onInsertQuestion}))}},{key:"getMover",value:function(){return Object(k.createElement)("div",{className:"schema-faq-section-mover"},Object(k.createElement)(T.IconButton,{className:"editor-block-mover__control",onClick:this.onMoveUp,icon:"arrow-up-alt2",label:Object(S.__)("Move question up","wordpress-seo"),"aria-disabled":this.props.isFirst}),Object(k.createElement)(T.IconButton,{className:"editor-block-mover__control",onClick:this.onMoveDown,icon:"arrow-down-alt2",label:Object(S.__)("Move question down","wordpress-seo"),"aria-disabled":this.props.isLast}))}},{key:"onSelectImage",value:function(e){var t=this.props,n=t.attributes,s=n.answer,o=n.question,r=t.index,i=s.slice(),a=Object(k.createElement)("img",{key:e.id,alt:e.alt,src:e.url});i.push?i.push(a):i=[i,a],this.props.onChange(o,i,o,s,r)}},{key:"shouldComponentUpdate",value:function(e){return!Object(D.isShallowEqualObjects)(e,this.props)}},{key:"render",value:function(){var e=this.props,t=e.subElement,n=e.attributes,s=e.isSelected,o=n.id,r=n.question,i=n.answer;return Object(k.createElement)("div",{className:"schema-faq-section",key:o},Object(k.createElement)(Z.RichText,{className:"schema-faq-question",tagName:"p",key:o+"-question",value:r,onChange:this.onChangeQuestion,isSelected:s&&"question"===t,unstableOnFocus:this.onFocusQuestion,placeholder:Object(S.__)("Enter a question","wordpress-seo"),keepPlaceholderOnFocus:!0,formattingControls:["italic","strikethrough","link"]}),Object(k.createElement)(Z.RichText,{className:"schema-faq-answer",tagName:"p",key:o+"-answer",value:i,onChange:this.onChangeAnswer,isSelected:s&&"answer"===t,unstableOnFocus:this.onFocusAnswer,placeholder:Object(S.__)("Enter the answer to the question","wordpress-seo"),keepPlaceholderOnFocus:!0}),s&&Object(k.createElement)("div",{className:"schema-faq-section-controls-container"},this.getMover(),this.getButtons()))}}],[{key:"getImageSrc",value:function(e){if(!e||!e.filter)return!1;var t=e.filter(function(e){return e&&e.type&&"img"===e.type})[0];return!!t&&t.props.src}},{key:"Content",value:function(e){return Object(k.createElement)("div",{className:"schema-faq-section",id:e.id,key:e.id},Object(k.createElement)($,{tagName:"strong",className:"schema-faq-question",key:e.id+"-question",value:e.question}),Object(k.createElement)($,{tagName:"p",className:"schema-faq-answer",key:e.id+"-answer",value:e.answer}))}}]),r}(k.Component);ee.propTypes={index:x.a.number.isRequired,attributes:x.a.object.isRequired,onChange:x.a.func.isRequired,insertQuestion:x.a.func.isRequired,removeQuestion:x.a.func.isRequired,onFocus:x.a.func.isRequired,onMoveUp:x.a.func.isRequired,onMoveDown:x.a.func.isRequired,subElement:x.a.string,isSelected:x.a.bool.isRequired,isFirst:x.a.bool.isRequired,isLast:x.a.bool.isRequired},ee.defaultProps={subElement:""};var te=N(ee.Content),ne=function(e){m()(u,e);var s,o,n=(s=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,t,n=w()(s);return t=o?(e=w()(this).constructor,Reflect.construct(n,arguments,e)):n.apply(this,arguments),b()(this,t)});function u(e){var t;return a()(this,u),(t=n.call(this,e)).state={focus:""},t.changeQuestion=t.changeQuestion.bind(d()(t)),t.insertQuestion=t.insertQuestion.bind(d()(t)),t.removeQuestion=t.removeQuestion.bind(d()(t)),t.swapQuestions=t.swapQuestions.bind(d()(t)),t.moveQuestionDown=t.moveQuestionDown.bind(d()(t)),t.moveQuestionUp=t.moveQuestionUp.bind(d()(t)),t.setFocus=t.setFocus.bind(d()(t)),t.onAddQuestionButtonClick=t.onAddQuestionButtonClick.bind(d()(t)),t}return l()(u,[{key:"onAddQuestionButtonClick",value:function(){this.insertQuestion(null,[],[],!1)}},{key:"changeQuestion",value:function(e,t,n,s,o){var r,i=this.props.attributes.questions?this.props.attributes.questions.slice():[];o>=i.length||i[o].question!==n||i[o].answer!==s||(i[o]={id:i[o].id,question:e,answer:t,jsonQuestion:Object(k.renderToString)(e),jsonAnswer:Object(k.renderToString)(t)},(r=ee.getImageSrc(t))&&(i[o].jsonImageSrc=r),this.props.setAttributes({questions:i}))}},{key:"insertQuestion",value:function(e,t,n,s){var o=0<arguments.length&&void 0!==e?e:null,r=1<arguments.length&&void 0!==t?t:[],i=2<arguments.length&&void 0!==n?n:[],a=!(3<arguments.length&&void 0!==s)||s,c=this.props.attributes.questions?this.props.attributes.questions.slice():[];null===o&&(o=c.length-1),c.splice(o+1,0,{id:u.generateId("faq-question"),question:r,answer:i,jsonQuestion:"",jsonAnswer:""}),this.props.setAttributes({questions:c}),a?setTimeout(this.setFocus.bind(this,"question",o)):Object(E.speak)(Object(S.__)("New question added","wordpress-seo"))}},{key:"swapQuestions",value:function(e,t){var n=this.props.attributes.questions?this.props.attributes.questions.slice():[],s=n[e];n[e]=n[t],n[t]=s,this.props.setAttributes({questions:n});var o=this.state.focus.split(":"),r=c()(o,2),i=r[0],a=r[1];i==="".concat(e)?this.setFocus(a,t):i==="".concat(t)&&this.setFocus(a,e)}},{key:"moveQuestionUp",value:function(e){this.swapQuestions(e,e-1)}},{key:"moveQuestionDown",value:function(e){this.swapQuestions(e,e+1)}},{key:"removeQuestion",value:function(e){var t=this.props.attributes.questions?this.props.attributes.questions.slice():[];t.splice(e,1),this.props.setAttributes({questions:t});var n=0;t[e]?n=e:t[e-1]&&(n=e-1),this.setFocus("question",n)}},{key:"setFocus",value:function(e,t){var n="".concat(t,":").concat(e);n!==this.state.focus&&this.setState({focus:n})}},{key:"getAddQuestionButton",value:function(){return Object(k.createElement)(T.IconButton,{icon:"insert",onClick:this.onAddQuestionButtonClick,className:"schema-faq-add-question"},Object(S.__)("Add question","wordpress-seo"))}},{key:"getQuestions",value:function(){var n=this,s=this.props.attributes;if(!s.questions)return null;var e=this.state.focus.split(":"),t=c()(e,2),o=t[0],r=t[1];return s.questions.map(function(e,t){return Object(k.createElement)(ee,{index:t,key:e.id,attributes:e,insertQuestion:n.insertQuestion,removeQuestion:n.removeQuestion,onChange:n.changeQuestion,onFocus:n.setFocus,isSelected:o==="".concat(t),subElement:r,onMoveUp:n.moveQuestionUp,onMoveDown:n.moveQuestionDown,isFirst:0===t,isLast:t===s.questions.length-1})})}},{key:"render",value:function(){var e=["schema-faq",this.props.className].filter(function(e){return e}).join(" ");return Object(k.createElement)("div",{className:e},Object(k.createElement)("div",null,this.getQuestions()),Object(k.createElement)("div",{className:"schema-faq-buttons"},this.getAddQuestionButton()))}}],[{key:"generateId",value:function(e){return"".concat(e,"-").concat((new Date).getTime())}},{key:"Content",value:function(e){var t=e.questions,n=e.className,s=t?t.map(function(e,t){return Object(k.createElement)(te,v()({key:t},e))}):null,o=["schema-faq",n].filter(function(e){return e}).join(" ");return Object(k.createElement)("div",{className:o},s)}}]),u}(k.Component);function se(e){var t=N(F.RichText.Content);return Object(k.createElement)("div",{className:"schema-faq-section",key:e.id},Object(k.createElement)(t,{tagName:"strong",className:"schema-faq-question",key:e.id+"-question",value:e.question}),Object(k.createElement)(t,{tagName:"p",className:"schema-faq-answer",key:e.id+"-answer",value:e.answer}))}function oe(e){var t=e.attributes,n=t.questions,s=t.className,o=N(se),r=n?n.map(function(e,t){return Object(k.createElement)(o,v()({key:t},e))}):null,i=["schema-faq",s].filter(function(e){return e}).join(" ");return Object(k.createElement)("div",{className:i},r)}ne.propTypes={attributes:x.a.object.isRequired,setAttributes:x.a.func.isRequired,className:x.a.string},ne.defaultProps={className:""},oe.propTypes={attributes:x.a.object.isRequired};var re={v13_1:oe},ie={questions:{type:"array"},additionalListCssClasses:{type:"string"}};Object(s.registerBlockType)("yoast/how-to-block",{title:Object(S.__)("Yoast How-to","wordpress-seo"),description:Object(S.__)("Create a How-to guide in an SEO-friendly way. You can only use one How-to block per post.","wordpress-seo"),icon:"editor-ol",category:"yoast-structured-data-blocks",keywords:[Object(S.__)("How-to","wordpress-seo"),Object(S.__)("How to","wordpress-seo"),Object(S.__)("Schema","wordpress-seo"),Object(S.__)("SEO","wordpress-seo"),Object(S.__)("Structured Data","wordpress-seo-premium")],example:{attributes:{steps:[{id:H.generateId("how-to-step"),name:[],text:[]},{id:H.generateId("how-to-step"),name:[],text:[]}]}},supports:{multiple:!1},attributes:X,edit:function(e){var t=e.attributes,n=e.setAttributes,s=e.className;return t.steps&&0!==t.steps.length||(t.steps=[{id:H.generateId("how-to-step"),name:[],text:[]}]),Object(k.createElement)(H,{attributes:t,setAttributes:n,className:s})},save:function(e){var t=e.attributes;return Object(k.createElement)(H.Content,t)},deprecated:[{attributes:X,save:W.v11_4},{attributes:X,save:W.v8_2}]}),Object(s.registerBlockType)("yoast/faq-block",{title:Object(S.__)("Yoast FAQ","wordpress-seo"),description:Object(S.__)("List your Frequently Asked Questions in an SEO-friendly way. You can only use one FAQ block per post.","wordpress-seo"),icon:"editor-ul",category:"yoast-structured-data-blocks",keywords:[Object(S.__)("FAQ","wordpress-seo"),Object(S.__)("Frequently Asked Questions","wordpress-seo"),Object(S.__)("Schema","wordpress-seo"),Object(S.__)("SEO","wordpress-seo"),Object(S.__)("Structured Data","wordpress-seo-premium")],example:{attributes:{questions:[{id:ne.generateId("faq-question"),question:[],answer:[]},{id:ne.generateId("faq-question"),question:[],answer:[]},{id:ne.generateId("faq-question"),question:[],answer:[]}]}},attributes:ie,edit:function(e){var t=e.attributes,n=e.setAttributes,s=e.className;return t.questions&&0!==t.questions.length||(t.questions=[{id:ne.generateId("faq-question"),question:[],answer:[]}]),Object(k.createElement)(ne,{attributes:t,setAttributes:n,className:s})},save:function(e){var t=e.attributes;return Object(k.createElement)(ne.Content,t)},deprecated:[{attributes:ie,save:re.v13_1}]})},39:function(e,t,n){var s=n(99),o=n(100),r=n(101);e.exports=function(e,t){return s(e)||o(e,t)||r()}},5:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},7:function(e){function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}e.exports=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}},70:function(n){function s(e,t){return n.exports=s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}n.exports=s},8:function(t){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},87:function(e){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},88:function(e){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},89:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},99:function(e){e.exports=function(e){if(Array.isArray(e))return e}}});