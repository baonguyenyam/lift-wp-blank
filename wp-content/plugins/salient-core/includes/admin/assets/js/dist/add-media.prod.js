"use strict";jQuery(document).ready(function(o){function i(){0<o("#_nectar_header_bg").length&&(0<o("#_nectar_header_bg").attr("value").length||0<o("#_nectar_header_bg_color").length&&0<o("#_nectar_header_bg_color").attr("value").length?o("#_nectar_header_parallax").parents("tr").show():(o("#_nectar_header_parallax").parents("tr").hide(),o("#_nectar_header_parallax").prop("checked",!1)))}o(".nectar-add-btn").on("click",function(e){var t=o(this);e.preventDefault();var a=null;(a=wp.media.frames.customHeader=wp.media({title:o(this).attr("data-title"),library:{type:"image"},button:{text:o(this).attr("data-update")}})).on("close",function(){o("body").removeClass("page-header-edit")}),a.on("select",function(){var e=a.state().get("selection").first().attributes.url;t.parent().find(".nectar-media-preview").attr("src",e),o("#"+t.attr("rel-id")).val(e).trigger("change"),t.parent().find(".nectar-add-btn").hide(),t.parent().find(".nectar-media-preview").show(),t.parent().find(".nectar-remove-btn").show(),o("body").removeClass("page-header-edit"),i()}),a.open(),o("body").addClass("page-header-edit")}),o(".nectar-remove-btn").on("click",function(e){e.preventDefault(),o("#"+o(this).attr("rel-id")).val(""),o(this).prev().fadeIn(),o(this).parent().find(".nectar-media-preview").fadeOut(),o(this).fadeOut(),i()}),o(".nectar-add-media-btn").on("click",function(e){e.preventDefault();var t=o(this),a=null;(a=wp.media.frames.customHeader=wp.media({title:o(this).data("choose"),library:{type:"video"},button:{text:o(this).data("update")}})).on("select",function(){var e=a.state().get("selection").first();o("#"+t.attr("rel-id")).val(e.attributes.url).trigger("change"),o("#_nectar_video_embed").trigger("keyup"),t.parent().find(".nectar-add-media-btn").hide(),t.parent().find(".nectar-remove-media-btn").show()}),a.open()}),o(".nectar-remove-media-btn").on("click",function(e){e.preventDefault(),o("#"+o(this).attr("rel-id")).val(""),o(this).prev().fadeIn(),o(this).parent().find(".nectar-media-preview").fadeOut(),o(this).fadeOut()});var e=o(document).find(".nectar-media-gallery");o(e).each(function(){o(this).on({click:function(e){var n=o(this).closest("fieldset");if("remove-gal"===e.currentTarget.id)return n.find(".gallery_values").val(""),void n.find(".screenshot").html("");if("undefined"!=typeof wp&&wp.media&&wp.media.gallery){e.preventDefault();var t,a,i,r=n.find(".gallery_values").val(),l=r?'[gallery ids="'+r+'"]':'[gallery ids="0"]',d=wp.media.gallery.edit(l);return 0<o("body.particle-edit").length&&(o(d.title.view.el).find(".media-frame-title h1").text("Edit Particle Shapes"),o(d.title.view.el).find(".media-frame-menu .media-menu a:contains(Add to Gallery)").text("Add to Particle Shapes"),o(d.title.view.el).find(".media-frame-menu .media-menu a:contains(Edit Gallery)").text("Edit"),o(d.title.view.el).find(".media-frame-menu .media-menu a:contains(Cancel Gallery)").text("Cancel"),o(d.title.view.el).find(".media-toolbar-primary a:contains(Update gallery)").text("Update Particle Shapes"),setTimeout(function(){o(d.title.view.el).find(".media-toolbar-primary a:contains(Update gallery)").text("Update Particle Shapes")},400),t='.collection-settings, input[type="text"].describe, .attachment-details label[data-setting="alt"], .attachment-details label[data-setting="description"] { display: none!important;} .compat-item .label {max-width: 30%; } p.help { font-size: 12px; font-style: normal; color: #888; } .compat-item tr.compat-field-shape-bg-color, .compat-item tr.compat-field-shape-color-alpha, .compat-item tr.compat-field-shape-color-mapping, .compat-item tr.compat-field-shape-particle-color,  .compat-item tr.compat-field-shape-density, .compat-item tr.compat-field-shape-max-particle-size { display: block;} ',o("style#remove-gallery-els").remove(),a=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("style")).type="text/css",i.id="remove-gallery-els",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),a.appendChild(i),o(".media-menu-item:contains(Add to Particle Shapes)").on("click",function(){o(d.title.view.el).find(".media-frame-title h1, .media-frame-toolbar .media-button-insert").text("Add to Particle Shapes")}),o(".media-menu-item:contains(Edit Particle Shapes)").on("click",function(){o(d.title.view.el).find(".media-frame-title h1").text("Edit Particle Shapes"),o(".media-frame-toolbar .media-button-insert").text("Update Particle Shapes")}),o("body").on("click",".media-frame:not(.hide-router) .attachments-browser li.attachment .attachment-preview",function(){o(d.title.view.el).find(".media-frame-toolbar .media-button-insert").text("Add to Particle Shapes"),o(d.title.view.el).find(".media-frame-title h1").text("Add to Particle Shapes")}),o("body").on("mousedown",".media-toolbar-primary .button:contains(Add to Particle Shapes)",function(){setTimeout(function(){o(d.title.view.el).find(".media-frame-toolbar .media-button-insert").text("Update Particle Shapes"),o(d.title.view.el).find(".media-frame-title h1").text("Edit Particle Shapes")},200)})),d.state("gallery-edit").on("update",function(e){n.find(".screenshot").html(""),o("style#remove-gallery-els").remove(),o("body").removeClass("particle-edit");var t,a,i="",r=e.models.map(function(e){return t=e.toJSON(),a=void 0!==t.sizes.thumbnail?t.sizes.thumbnail.url:t.url,i="<img class='nectar-media-preview' src='"+a+"'  />",n.find(".screenshot").append(i),e.id});n.find(".gallery_values").val(r.join(","))}),!1}}},".gallery-attachments")})});