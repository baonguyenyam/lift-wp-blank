"use strict";!function(f){function t(t,i,e,s){this.el=t,this.type=i,this.resizeVideoToCover=e,this.fullWidthContentColumns=s,this.flickityEl=null,this.createTestimonialControls()}t.prototype.createTestimonialControls=function(){var t,i,e,s,l,n,a,o=0<f("body.vc_editor").length?"> div":"blockquote";if("multiple_visible"!=this.type&&"multiple_visible_minimal"!=this.type)if(this.el.animate({opacity:"1"},800),1<this.el.find("blockquote").length){this.el.find(".controls, .testimonial-next-prev").remove(),this.el.append('<div class="controls"><ul></ul></div>');for(var r,d=this.el.find("blockquote").length,c=this.el,h=0;h<d;h++)this.el.is('[data-style="minimal"]')?c.find(".controls ul").append("<li>"+(h+1)+"</li>"):c.find(".controls ul").append('<li><span class="pagination-switch"></span></li>');this.el.is('[data-style="minimal"]')&&(this.el.append('<div class="testimonial-next-prev"><a href="#" class="prev fa fa-angle-left"></a><a href="#" class="next fa fa-angle-right"></a></div>'),this.el.find(".testimonial-next-prev a").on("click",this.minimalNextPrevSelect),0==this.el.find(".active").length&&(this.el.find(".slides "+o+":first-child").addClass("active").css({opacity:"1",transform:"translateX(0px)"}).css("z-index","20"),this.el.hasClass("disable-height-animation")||this.el.find(".slides").css({height:this.el.find(".slides "+o+":first-child").height()+40+"px"})),0<this.el.attr("data-autorotate").length&&(c=this.el,t=parseInt(this.el.attr("data-autorotate"))<100?4e3:parseInt(this.el.attr("data-autorotate")),i=this,r=setInterval(function(){i.testimonialRotate(c)},t)),this.el.find(".testimonial-next-prev a").on("click",function(t){void 0!==t.clientX&&clearInterval(r)}),this.el.find(".controls ul").wrap('<div class="control-wrap" />'),this.el.find(".controls ul").css("width",20*this.el.find(".controls ul li").length+1+"px"),this.el.find(".controls").append('<span class="out-of">/</span><span class="total">'+this.el.find("blockquote").length+"</span>"),this.el.swipe({swipeLeft:function(t){return c.find(".testimonial-next-prev .next").trigger("click"),t.stopImmediatePropagation(),clearInterval(r),!1},swipeRight:function(t){return c.find(".testimonial-next-prev .prev").trigger("click"),t.stopImmediatePropagation(),clearInterval(r),!1}})),this.el.is('[data-style="minimal"]')||(this.el.find(".controls ul li").on("click",this.defaultPaginationSelect),this.el.find(".controls ul li").first().trigger("click"),0<this.el.attr("data-autorotate").length&&(t=parseInt(this.el.attr("data-autorotate"))<100?4e3:parseInt(this.el.attr("data-autorotate")),c=this.el,i=this,r=setInterval(function(){i.testimonialRotate(c)},t)),this.el.find(".controls li").on("click",function(t){void 0!==t.clientX&&clearInterval(r)}),this.el.swipe({swipeLeft:function(t){return c.find(".controls ul li span.active").parent().next("li").find("span").trigger("click"),t.stopImmediatePropagation(),clearInterval(r),!1},swipeRight:function(t){return c.find(".controls ul li span.active").parent().prev("li").find("span").trigger("click"),t.stopImmediatePropagation(),clearInterval(r),!1}}))}else{0==this.el.find(".controls").length&&(e=this.el.find(".slides blockquote").height(),this.el.find(".slides blockquote").css({opacity:"0",transform:"translateX(-25px)","z-index":"1"}),this.el.find(".slides blockquote").css({opacity:"1",transform:"translateX(0px)"}).css("z-index","20"),this.el.find(".slides").stop(!0,!0).animate({height:e+20+"px"},450,"easeOutCubic"))}"multiple_visible"!=this.type&&"multiple_visible_minimal"!=this.type||(c=(i=this).el,s=1<c.attr("data-autorotate").length&&100<parseInt(c.attr("data-autorotate"))&&parseInt(c.attr("data-autorotate")),0==c.find("img").length&&f("body"),"multiple_visible_minimal"!=this.el.attr("data-style")?this.el.find("blockquote").each(function(){f(this).find(".image-icon").insertAfter(f(this).find("p"))}):4<this.el.find("blockquote").length&&this.el.addClass("has-alf"),l="multiple_visible_minimal"==this.el.attr("data-style"),n=!(0<f("body.vc_editor").length),a=0<f("body.vc_editor").length,this.flickityEl=c.find(".slides").flickity({contain:!0,draggable:n,groupCells:l,lazyLoad:!1,imagesLoaded:!0,percentPosition:!0,prevNextButtons:!1,pageDots:!0,resize:!0,setGallerySize:!0,wrapAround:!0,autoPlay:s,pauseAutoPlayOnHover:a,accessibility:!1}),0<this.flickityEl.find(".vc_element.is-selected > blockquote").length&&(this.flickityEl.find(".vc_element.is-selected > blockquote").addClass("is-selected"),this.flickityEl.on("select.flickity",function(){i.flickityEl.find(".vc_element > blockquote").removeClass("is-selected"),i.flickityEl.find(".vc_element.is-selected > blockquote").addClass("is-selected")})),c.css("opacity","1"));var p=this;f("body").on("click",'.testimonial_slider:not([data-style*="multiple_visible"]):not([data-style="minimal"]) .controls li, .testimonial_slider[data-style="minimal"] .testimonial-next-prev a',function(){return p.resizeVideoToCover(),!1})},t.prototype.defaultPaginationSelect=function(t){var i=f(t.currentTarget);if(i.find("span").hasClass("active"))return!1;var e=0<f("body.vc_editor").length?"> div":"blockquote",s=i.index(),l=i.parents(".testimonial_slider").find(".slides blockquote").eq(s).height();i.parents(".testimonial_slider").find("li span").removeClass("active"),i.find("span").addClass("active"),i.parents(".testimonial_slider").find(".slides "+e).addClass("no-trans"),i.parents(".testimonial_slider").find(".slides "+e).css({opacity:"0",transform:"translateX(-25px)","z-index":"1"}),i.parents(".testimonial_slider").find(".slides "+e).eq(s).removeClass("no-trans").css({opacity:"1",transform:"translateX(0px)"}).css("z-index","20"),i.parents(".testimonial_slider:not(.disable-height-animation)").find(".slides").stop(!0,!0).animate({height:l+40+"px"},450,"easeOutCubic")},t.prototype.minimalNextPrevSelect=function(t){var i,e=f(t.currentTarget),s=0<f("body.vc_editor").length?"> div":"blockquote",l=e.parents(".testimonial_slider").find(".slides "+s+".active").index(),n=l;return e.parents(".testimonial_slider").find(".slides "+s).addClass("no-trans"),e.parents(".testimonial_slider").find(".slides "+s).css({opacity:"0",transform:"translateX(-25px)","z-index":"1"}),e.parents(".testimonial_slider").find(".slides "+s).eq(l).removeClass("active"),e.hasClass("next")?(n=l+1>=e.parents(".testimonial_slider").find(".slides "+s).length?0:l+1,i=e.parents(".testimonial_slider").find(".slides "+s).eq(n).height(),e.parents(".testimonial_slider").find(".slides "+s).eq(n).addClass("active").removeClass("no-trans").css({opacity:"1",transform:"translateX(0px)"}).css("z-index","20")):(n=l-1==-1?e.parents(".testimonial_slider").find(".slides "+s).length-1:l-1,i=e.parents(".testimonial_slider").find(".slides "+s).eq(l-1).height(),e.parents(".testimonial_slider").find(".slides "+s).eq(l-1).addClass("active").removeClass("no-trans").css({opacity:"1",transform:"translateX(0px)"}).css("z-index","20")),e.parents(".testimonial_slider").find(".control-wrap ul").css({transform:"translateX(-"+20*n+"px)"}),e.parents(".testimonial_slider:not(.disable-height-animation)").find(".slides").stop(!0,!0).animate({height:i+40+"px"},450,"easeOutCubic"),!1},t.prototype.testimonialRotate=function(){var t=this.el.find("li").length,i=this.el.find(".pagination-switch.active").parent().index();0<this.el.parents(".toggle").length&&this.el.parents(".toggle").hasClass("open"),this.el.is('[data-style="minimal"]')?this.el.find(".testimonial-next-prev .next").trigger("click"):i+1==t?this.el.find("ul li:first-child").trigger("click"):this.el.find(".pagination-switch.active").parent().next("li").trigger("click")},t.prototype.testimonialHeightResize=function(){var t,i,e;this.el.is(".disable-height-animation")||this.el.is('[data-style*="multiple_visible"]')||(t=0<f("body.vc_editor").length?".slides > div":".slides blockquote",i=this.el.is('[data-style="minimal"]')?this.el.find(t+".active").index():this.el.find(".controls ul li span.active").parent().index(),e=this.el.find(t).eq(i).height(),this.el.find(".slides").stop(!0,!0).css({height:e+40+"px"}))},t.prototype.testimonialSliderHeight=function(){var t;this.el.is(".disable-height-animation")&&!this.el.is('[data-style*="multiple_visible"]')&&(t=0,this.el.find("blockquote").each(function(){t=f(this).height()>t?f(this).height():t}),0==t&&(t=100),this.el.find(".slides").css("height",t+40+"px"),this.el.animate({opacity:"1"}),this.fullWidthContentColumns())},t.prototype.testimonialSliderHeightMinimalMult=function(){var t;"multiple_visible_minimal"==this.type&&(t=0,this.el.find("blockquote > .inner p").css("height","auto"),this.el.find("blockquote > .inner p").each(function(){t=f(this).height()>t?f(this).height():t}),0==t&&(t=200),this.el.find("blockquote > .inner p").css("height",t+"px"))},window.NectarTestimonialSlider=t}(jQuery);