"use strict";var _data=require("@wordpress/data"),_blocks=require("@wordpress/blocks"),_i18n=require("@wordpress/i18n"),_lodash=require("lodash");require("./fields"),require("./store");var _blockEdit=_interopRequireDefault(require("./components/block-edit")),_blockSave=_interopRequireDefault(require("./components/block-save")),_transformFieldsToAttributes=_interopRequireDefault(require("./utils/transform-fields-to-attributes"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(t,e){var r,i=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)),i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(r,!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,_i18n.setLocaleData)(window.cf.config.locale,"carbon-fields-ui");var containerDefinitions={},fieldDefinitions={};(0,_lodash.get)(window.cf,"preloaded.blocks",[]).forEach(function(i){function e(e,t){var r=1<arguments.length&&void 0!==t?t:null;return(0,_lodash.get)(i,"settings.".concat(e),r)}var t=(0,_lodash.kebabCase)(i.id).replace("carbon-fields-container-",""),r=(0,_transformFieldsToAttributes.default)(i.fields);containerDefinitions[t]=i,fieldDefinitions[t]=i.fields.map(function(e){return _objectSpread({},e)}),(0,_blocks.registerBlockType)("carbon-fields/".concat(t),{title:i.title,icon:e("icon"),parent:e("parent",[]),category:e("category.slug"),keywords:e("keywords",[]),description:e("description",""),attributes:{data:{type:"object",default:r}},supports:{tabs:(0,_lodash.isPlainObject)(e("tabs")),preview:e("preview"),innerBlocks:e("inner_blocks.enabled"),alignWide:!1,anchor:!1,html:!1},edit:_blockEdit.default,save:_blockSave.default})}),(0,_data.dispatch)("carbon-fields/blocks").setupContainerDefinitions(containerDefinitions),(0,_data.dispatch)("carbon-fields/blocks").setupFieldDefinitions(fieldDefinitions);