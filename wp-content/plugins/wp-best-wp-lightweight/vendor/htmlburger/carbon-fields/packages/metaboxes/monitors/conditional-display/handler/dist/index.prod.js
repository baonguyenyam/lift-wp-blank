"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=handler;var _i18n=require("@wordpress/i18n"),_lodash=require("lodash"),_containers=require("../../../containers"),_base=_interopRequireDefault(require("../conditions/base")),_boolean2=_interopRequireDefault(require("../conditions/boolean")),_postTerm=_interopRequireDefault(require("../conditions/post-term")),_postTemplate=_interopRequireDefault(require("../conditions/post-template")),_postAncestorId=_interopRequireDefault(require("../conditions/post-ancestor-id")),_termParentId=_interopRequireDefault(require("../conditions/term-parent-id")),_termAncestorId=_interopRequireDefault(require("../conditions/term-ancestor-id"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var conditions={boolean:_boolean2.default,post_term:_postTerm.default,post_ancestor_id:_postAncestorId.default,post_parent_id:_base.default,post_level:_base.default,post_format:_base.default,post_template:_postTemplate.default,term_level:_base.default,term_parent:_termParentId.default,term_ancestor:_termAncestorId.default,user_role:_base.default};function evaluate(e,r,t){var n=e.map(function(e){if(e.relation)return evaluate(e.conditions,r,e.relation);var t=(0,_lodash.get)(conditions,e.type);return t?t.isFulfiled(e,r):(console.error((0,_i18n.sprintf)((0,_i18n.__)('Unsupported container condition - "%1$s".',"carbon-fields-ui"),e.type)),!1)});switch(t){case"AND":return n.every(Boolean);case"OR":return n.some(Boolean);default:return console.error((0,_i18n.sprintf)((0,_i18n.__)('Unsupported container condition relation used - "%1$s".',"carbon-fields-ui"),t)),!1}}function handler(e){var u=e.containers,s=e.context;return function(r){(0,_lodash.map)(u,function(e,t){return[t,evaluate(e.conditions.conditions,r,e.conditions.relation)]}).forEach(function(e){var t=_slicedToArray(e,2),r=t[0],n=t[1],o=document.getElementById(r),i=document.querySelector(".container-".concat(r)),a=!!i.dataset.mounted;o&&(o.hidden=!n),i&&(n&&!a&&(0,_containers.renderContainer)(u[r],s),!n&&a&&(delete i.dataset.mounted,i._reactRootContainer.unmount()))})}}