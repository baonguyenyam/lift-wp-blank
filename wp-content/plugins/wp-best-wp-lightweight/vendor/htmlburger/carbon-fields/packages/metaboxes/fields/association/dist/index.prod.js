"use strict";var _hooks=require("@wordpress/hooks"),_data=require("@wordpress/data"),_lodash=require("lodash"),_core=require("@carbon-fields/core"),_stripCompactInputPrefix=_interopRequireDefault(require("../../utils/strip-compact-input-prefix"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findFieldByName(e,a){return(0,_lodash.find)(e,function(e){return e.name===a})}(0,_hooks.addFilter)("carbon-fields.association.metabox","carbon-fields/metaboxes",(0,_core.withProps)(function(u){return{hierarchyResolver:function(){var e=(0,_data.select)("carbon-fields/metaboxes").getContainerById(u.containerId),a=(0,_data.select)("carbon-fields/metaboxes").getFieldsByContainerId(u.containerId),t=(t=(0,_stripCompactInputPrefix.default)(u.name).split(/\[|\]/g)).filter(function(e){return""!==e});if("widget"===e.type)return u.field.base_name;for(var n=findFieldByName(a,t.shift()),r=a.indexOf(n),i=n.base_name;0<t.length;){var o,c,s=t.shift(),d=!isNaN(s),f=s===u.field.base_name,l=!d&&!f;d&&(r="".concat(r,".value.").concat(s,".name"),i="".concat(i,"[").concat(s,"]:").concat((0,_lodash.get)(a,r),"/")),l&&(o=findFieldByName((0,_lodash.get)(a,r.replace(/\.name$/,".fields")),s),c=(0,_lodash.find)(a,["id",o.id]),r=a.indexOf(c),i="".concat(i).concat(c.base_name)),f&&(i="".concat(i).concat(s))}return i}}}));