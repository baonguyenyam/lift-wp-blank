"use strict";window.vc||(window.vc={}),function(){function c(e){return"\\"+t[e]}vc.templateOptions={default:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},custom:{evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g}};var n=/(.)^/,t={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},d=/\\|'|\r|\n|\u2028|\u2029/g;vc.template=function(r,e){e=_.defaults({},e,vc.templateOptions.default);var t,a=RegExp([(e.escape||n).source,(e.interpolate||n).source,(e.evaluate||n).source].join("|")+"|$","g"),s=0,o="__p+='";r.replace(a,function(e,t,a,i,n){return o+=r.slice(s,n).replace(d,c),s=n+e.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":a?o+="'+\n((__t=("+a+"))==null?'':__t)+\n'":i&&(o+="';\n"+i+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{t=new Function(e.variable||"obj","_",o)}catch(e){throw e.source=o,e}function i(e){return t.call(this,e,_)}return a=e.variable||"obj",i.source="function("+a+"){\n"+o+"}",i}}(),function(a){_.isUndefined(window.vc)&&(window.vc={}),window.Vc_postSettingsEditor=Backbone.View.extend({$editor:!1,sel:"wpb_csseditor",ace_enabled:!1,initialize:function(e){e&&0<e.length&&(this.sel=e),this.ace_enabled=!0},aceEnabled:function(){return this.ace_enabled&&window.ace&&window.ace.edit},setEditor:function(e){return this.aceEnabled()?this.setEditorAce(e):this.setEditorTextarea(e),this.$editor},focus:function(){var e;this.aceEnabled()?(this.$editor.focus(),e=this.$editor.session.getLength(),this.$editor.gotoLine(e,this.$editor.session.getLine(e-1).length)):this.$editor.focus()},setEditorAce:function(e){return this.$editor||(this.$editor=ace.edit(this.sel),this.$editor.getSession().setMode("ace/mode/css"),this.$editor.setTheme("ace/theme/chrome")),this.$editor.setValue(e),this.$editor.clearSelection(),this.$editor.focus(),e=this.$editor.getSession().getLength(),this.$editor.gotoLine(e,this.$editor.getSession().getLine(e-1).length),this.$editor},setEditorTextarea:function(e){return this.$editor||(this.$editor=a("<textarea></textarea>").css({width:"100%",height:"100%",minHeight:"300px"}),a("#"+this.sel).empty().append(this.$editor).css({overflowLeft:"hidden",width:"100%",height:"100%"})),this.$editor.val(e),this.$editor.focus(),this.$editor.parent().css({overflow:"auto"}),this.$editor},setSize:function(){var e=a(window).height()-380;this.aceEnabled()?a("#"+this.sel).css({height:e,minHeight:e}):(this.$editor.parent().css({height:e,minHeight:e}),this.$editor.css({height:"98%",width:"98%"}))},setSizeResizable:function(){var e=a("#"+this.sel),t=e.offset().top,t=vc.active_panel.$el.find('[data-vc-ui-element="panel-footer"]').offset().top-t-70;this.aceEnabled()?e.css({height:t,minHeight:t}):(this.$editor.parent().css({height:t,minHeight:t}),this.$editor.css({height:"98%",width:"98%"}))},getEditor:function(){return this.$editor},getValue:function(){return this.aceEnabled()?this.$editor.getValue():this.$editor.val()}})}(window.jQuery),function(r){r(function(){var t=r('[data-vc-roles="form"]');r('[data-vc-roles="part-state"]').on("click",function(){var e=r(this);e.data("vcCustomSelector",e.find(":selected").data("vcCustomSelector")||"")}).on("change",function(){var e,t=r(this),a=t.data("vcRolePart"),i=r('[data-vc-role-related-part="'+a+'"]');if("*"===i.data("vcRolePartState"))return!1;e=t.val(),a=t.data("vcCustomSelector")||"",i.data("vcRolePartState").toString()===e?(i.addClass("vc_visible"),a.length&&i.find(t.data("vcCustomSelector")).prop("checked",!0)):i.removeClass("vc_visible")}),t.on("submit",function(e){var a,i={};e&&e.preventDefault&&e.preventDefault(),(a=r("#submit_btn")).attr("disabled",!0),r("#vc_wp-spinner").show(),i.action=r("#vc_settings-roles-action").val(),i.vc_nonce_field=r("#vc_nonce_field").val(),i.vc_roles={},r("[data-vc-role]").each(function(){var e=r(this),t=e.data("vcRole"),a={};e.find("select").each(function(){var e=r(this),t=e.data("vcPart");void 0===a[t]&&(a[t]={}),a[t][e.data("vcName")]=e.val()}),e.find('[data-vc-role-related-part].vc_visible [data-vc-name][type="checkbox"]').each(function(){var e=r(this),t=e.data("vcPart");void 0===a[t]&&(a[t]={}),a[t][e.data("vcName")]=e.is(":checked")?e.val():"0"}),i.vc_roles[t]=JSON.stringify(a)}),r.ajax({url:t.attr("action"),type:"POST",dataType:"json",data:i,context:this}).done(function(e){var t;r("#vc_wp-spinner").hide(),e.message&&((t=r('<div id="vc_roles-message" class="updated vc_updater-result-message hidden"><p><strong></strong></p></div>')).find("strong").text(e.message),t.insertBefore(a).fadeIn(100),window.setTimeout(function(){t.slideUp(100,function(){r(this).remove(),a.attr("disabled",!1)})},2e3))})})}),r("[data-vc-accordion]").on("show.vc.accordion",function(){r(this).addClass("vc_opened")}).on("hide.vc.accordion",function(){r(this).removeClass("vc_opened")}),r('[data-vc-ui-element="panel-tab-control"]').on("click",function(e){var t=r(this),a=t.parents("fieldset").first(),i=".vc_wp-form-table";e.preventDefault(),r('[data-vc-ui-element="panel-tabs-controls"] .vc_active',a).removeClass("vc_active"),t.parent().addClass("vc_active"),t=t.data("filter"),a.attr("data-vc-roles-filter-value",t),i+=" "+t,r(".vc_wp-form-table [data-vc-capability]",a).addClass("vc_hidden"),r(i,a).removeClass("vc_hidden")}),r('[data-vc-roles="table-checkbox"]').on("change",function(){var e=r(this);(e.is(":checked")?e.parents("tr:first").find('[data-vc-name!="'+e.attr("data-vc-name")+'"]:checked'):e.parents('[data-vc-roles="table"]').first().find('[data-vc-roles-select-all-checkbox="'+e.data("vcCap")+'"]')).prop("checked",!1)}),r("[data-vc-roles-select-all-checkbox]").on("change",function(){var e=r(this),t=e.is(":checked"),a=e.parents('[data-vc-roles="table"]').first(),i=a.find(e.data("vcRelatedControls")),n=e.data("vcRolesSelectAllCheckbox");a.find('[data-vc-cap="'+n+'"]:visible').prop("checked",t),i.prop("checked",t),t&&_.defer(function(){a.find("[data-vc-roles-select-all-checkbox!="+n+"]:not([data-vc-cap])").prop("checked",!1),a.find('[data-vc-cap!="'+n+'"]:not([data-vc-roles-select-all-checkbox]):visible').prop("checked",!1)})}),r('[data-vc-role-related-part].vc_visible [data-vc-roles="table"]').each(function(){var a=r(this);a.find("thead [data-vc-roles-select-all-checkbox]").each(function(){var e=r(this),t=e.data("vcRolesSelectAllCheckbox");a.find('[data-vc-cap="'+t+'"]:not(:checked)').length||(e.prop("checked",!0),a.find('tfoot [data-vc-roles-select-all-checkbox="'+t+'"]').prop("checked",!0))})})}(window.jQuery),_.isUndefined(window.vc)&&(window.vc={}),jQuery(document).ready(function(e){_.isUndefined(window.less)||(window.vc.less={},window.vc.less.options={relativeUrls:!1,rootpath:!1},window.less.options.env=vcData.debug?"development":"production",window.less.options.logLevel=vcData.debug?4:0,window.vc.less.generateLessFormData=function(n,e){var r={};return _.isEmpty(e)||_.each(e,function(e,t){var a,i;_.isString(e)?(a=_.first(_.where(n,{name:e})),_.isObject(a)&&0<(i=a.value).length&&(r[t]=i)):_.isObject(e)&&!_.isUndefined(e.key)&&(a=_.first(_.where(n,{name:e.key})),_.isObject(a)||_.isUndefined(e.default_key)?_.isObject(a)||_.isUndefined(e.default)||(a={value:e.default}):a=_.isUndefined(r[e.default_key])?_.first(_.where(n,{name:e.default_key})):{value:r[e.default_key]},_.isObject(a)&&(i=a.value,_.isUndefined(e.modify_output)||!_.isObject(e.modify_output)||_.isEmpty(e.modify_output)||_.each(e.modify_output,function(e){_.isUndefined(e.plain)||!_.isObject(e.plain)||_.isEmpty(e.plain)||_.each(e.plain,function(e){e=e.replace("{{ value }}",i),i=e})}),i&&0<i.length&&(r[t]=i)))}),r},window.vc.less.fileManager=less.FileManager.prototype.extractUrlParts,window.less.FileManager.prototype.extractUrlParts=function(e,t){return e+="?v="+(window.vcData&&window.vcData.version?window.vcData.version:"4.5"),vc.less.fileManager(e,t)},window.vc.less.build=function(e,t){var a;this.options=_.extend({},{modifyVars:{},variablesDataLinker:{},lessPath:""},this.options,e),this.options.modifyVars=this.generateLessFormData(this.options.modifyVars,this.options.variablesDataLinker),a=this,_.defer(function(){less.render('@import "'+a.options.lessPath+'";',a.options).then(function(e){t&&t.call(a,e)},function(e){t&&t.call(a,void 0,e)})})})});var vc_am={current_form:!1};window.i18nLocaleVcAutomapper=window.i18nLocaleSettings,function(o){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var n;vc_am.vcGuid=function(){return e()+e()+"-"+e()},_.extend(wp.shortcode.prototype,{taggedString:function(){var a='[<span class="vc_preview-tag">'+_.escape(this.tag)+"</span>";return _.each(this.attrs.numeric,function(e){/\s/.test(e)?a+=' <span class="vc_preview-param">"'+_.escape(e)+'"</span>':a+=' <span class="vc_preview-param">'+_.escape(e)+"</span>"}),_.each(this.attrs.named,function(e,t){a+=' <span class="vc_preview-param">'+_.escape(t)+'="'+_.escape(e)+'"</span>'}),"single"===this.type?a+"]":"self-closing"===this.type?a+" /]":(a+="]",this.content&&(a+='<span class="vc_preview-content">'+_.escape(this.content)+"</span>"),a+'[/<span class="vc_preview-tag">'+_.escape(this.tag)+"</span>]")}}),wp.shortcode.atmPreview=function(e){return new wp.shortcode(e).taggedString()};var a,i,r=o("#vc_settings-automapper");function s(e,t){a&&(window.clearTimeout(a),o(".vc_settings-automapper").remove(),a=!1),(t=o('<div class="vc_atm-message updated'+(t?" vc_message-"+t:"")+'" style="display: none;"></div>')).text(e),t.prependTo(r).fadeIn(500,function(){var e=o(this);window.setTimeout(function(){e.remove()},5e3)})}function c(e,t){!_.isUndefined(t)&&t.length||(t=o(".tab_intro")),function(e){o(".vc_atm-message").remove();var t=o('<div class="vc_atm-message error" style="display: none;"></div>');return t.text(e),_.isUndefined(void 0)||window.setTimeout(function(){t.remove()},void 0),t}(e).insertBefore(t).fadeIn(500)}i=function(e){return(e=e.replace(/_|-/," ")).charAt(0).toUpperCase()+e.slice(1)};var t="?";-1<window.ajaxurl.indexOf("?")&&(t="&"),n=window.ajaxurl+t+"vc_action=automapper",d=function(t,a,i){var e="create"===t?(a.set("id",vc_am.vcGuid()),{vc_action:"create",action:"vc_automapper_create",data:a.toJSON()}):"update"===t?{vc_action:"update",action:"vc_automapper_update",id:a.get("id"),data:a.toJSON()}:"delete"===t?{vc_action:"delete",action:"vc_automapper_delete",id:a.get("id")}:{vc_action:"read",action:"vc_automapper_read"};o.ajax({method:"POST",url:n,dataType:"json",data:_.extend(e,{_vcnonce:window.vcAdminNonce}),context:this}).done(function(e){e.success&&((e=(e=e.data)&&"read"===t?e:a)?"read"===t&&i.success(e):i.error("Not found"))}).error(function(e){})};var t=Backbone.Model.extend({defaults:function(){return{tag:"",name:"",category:"",description:"",params:[]}},sync:d}),d=Backbone.Collection.extend({model:t,sync:d});vc_am.shortcodes=new d,Backbone.View.extend({tagName:"li",className:"widget",events:{"click .vc_automapper-edit-btn":"edit","click h4, widget-action":"edit","click .vc_automapper-delete-btn":"clear"},template_html:o("#vc_automapper-item-tpl").html()||"<span>{{ tag }}</span>",initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.removeView)},render:function(){var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())).attr("data-item-id",this.model.get("id")),this},edit:function(e){e&&e.preventDefault&&e.preventDefault(),new l({model:this.model}).render()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&this.model.destroy()},removeView:function(){this.$el.remove()}});var l,d=Backbone.View.extend({render:function(){return vc_am.current_form&&vc_am.current_form.close(),vc_am.current_form=this},getType:function(){return"form"},validate:function(e){var a=!1;if(!e.name)return window.i18nLocaleVcAutomapper.error_shortcode_name_is_required;if(!e.tag||!e.tag.match(/^\S+$/))return window.i18nLocaleVcAutomapper.error_enter_valid_shortcode_tag;var i=["param_name","heading","type"];return _.each(e.params,function(t){_.each(i,function(e){""!==t[e]&&("param_name"!==e||t[e].match(/^[a-z0-9_]+$/g))||(a=window.i18nLocaleVcAutomapper.error_enter_required_fields)},this)},this),a||null},isValid:function(e){return this.validationError=this.validate(e),!this.validationError},close:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form=!1,this.remove()}}),v=Backbone.View.extend({_$widget_title:!1,_$form_view:!1,edit_view:!1,tagName:"li",className:"widget",events:{"click .vc_automapper-edit-btn":"edit","click h4, .widget-action":"edit"},template_html:o("#vc_automapper-item-complex-tpl").html()||"<span>{{ tag }}</span>",header_template_html:'<h4>{{ name }}<span class="in-widget-title"></span></h4>',initialize:function(){_.bindAll(this,"removeEditForm"),this.listenTo(this.model,"destroy",this.removeView),this.model.view=this},render:function(){var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())).attr("data-item-id",this.model.get("id")),this},renderTitle:function(){var e=vc.template(this.header_template_html,vc.templateOptions.custom);this.$widgetTitle().html(e(this.model.toJSON()))},edit:function(e){if(e&&e.preventDefault&&e.preventDefault(),this.$editForm().is(":animated"))return!1;this.$el.addClass("vc_opened"),this.edit_view?this.close():this.edit_view=new p({model:this.model}).render()},$widgetTitle:function(){return this._$widget_title||(this._$widget_title=this.$el.find(".widget-title")),this._$widget_title},$editForm:function(){return this._$edit_form||(this._$edit_form=this.$el.find(".widget-inside")),this._$edit_form},removeEditForm:function(){this.edit_view&&this.edit_view.remove(),this.edit_view=!1},beforeSave:function(){this.$el.find("#vc_atm-name").val(o("#vc_atm-header-name").val())},close:function(){vc_am.current_form=!1,this.$el.removeClass("vc_opened"),this.renderTitle(),this.$editForm().slideUp(200),this.removeEditForm()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),this.model.destroy()},removeView:function(){this.remove()}}),m=d.extend({className:"vc_add-form-atm",template_html:o("#vc_automapper-add-form-tpl").html(),events:{"click #vc_atm-parse-string":"parseShortcode","click .vc_atm-cancel":"close"},getType:function(){return"create"},render:function(){m.__super__.render.call(this);var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e()),this.$el.insertAfter(".vc_automapper-toolbar"),this},shortcodesRegexp:_.memoize(function(){return new RegExp("\\[(\\[?)([\\w|-]+\\b)(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)")}),parseShortcode:function(e){e&&e.preventDefault&&e.preventDefault();var a=[],t=o("#vc_atm-shortcode-string").val();return!_.isEmpty(t)&&(e=t.match(this.shortcodesRegexp()))?(t=wp.shortcode.attrs(e[3]),_.each(t.named,function(e,t){a.push({param_name:t,type:"textfield",heading:i(t),description:"Example: "+e,value:e})},this),e[5]&&a.push({param_name:"content",type:"textarea",heading:"Content",description:"",value:e[5]}),e={tag:e[2],name:i(e[2]),category:window.i18nLocaleVcAutomapper.my_shortcodes_category,params:a},void(this.isValid(e)?(vc_am.shortcodes.create(e),s(window.i18nLocaleVcAutomapper.new_shortcode_mapped,"success"),o(".vc_atm-message").remove(),vc_am.shortcodes.last().view.edit()):(this.$el.addClass("form-invalid"),c(this.validationError)))):(this.$el.addClass("form-invalid"),c(window.i18nLocaleVcAutomapper.error_enter_valid_shortcode,this.$el),!1)}}),p=(l=d.extend({className:"vc_edit-form",active_preview:!1,events:{"click #vc_atm-save":"save","click .vc_atm-cancel":"close","click .vc_atm-delete":"clear","click #vc_atm-add-param":"addParam","click .vc_delete-param":"deleteParam","change #vc_atm-is-container":"setContentParam","keyup .vc_param-name, .vc_param-value, #vc_atm-tag":"setPreview","focus #vc_atm-tag":"setTagFieldActive","focus .vc_params input, .vc_params textarea":"setParamFieldActive","focus .vc_param.vc_content input, .vc_param.vc_content textarea":"setContentParamFieldActive","blur #vc_atm-tag, vc_param input":"unsetFieldActive",'change .vc_param-field [name="type"]':"changeParamType"},new:!1,template_html:o("#vc_automapper-form-tpl").html(),param_template_html:o("#vc_atm-form-param-tpl").html(),getType:function(){return"edit"},render:function(){l.__super__.render.call(this);var e=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(e(this.model.toJSON())),this.$el.insertAfter(o("[data-item-id="+this.model.id+"]").hide()),this.addAllParams(),this},changeParamType:function(e){var t=o(e.currentTarget),e=t.parents(".vc_fields");"hidden"===t.val()?(e.find('[name="heading"]').attr("disabled",!0),e.find('[name="description"]').attr("disabled",!0)):(e.find('[name="heading"]').attr("disabled",!1),e.find('[name="description"]').attr("disabled",!1))},setTagFieldActive:function(){this.active_preview&&o(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-tag",o(this.active_preview).addClass("vc_active")},setParamFieldActive:function(e){e=o(e.currentTarget).parents(".vc_param:first").index(),this.active_preview&&o(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-param:eq("+e+")",o(this.active_preview).addClass("vc_active")},setContentParamFieldActive:function(){this.active_preview&&o(this.active_preview).removeClass("vc_active"),this.active_preview="#vc_shortcode-preview .vc_preview-content",o(this.active_preview).addClass("vc_active")},unsetFieldActive:function(){o(this.active_preview).removeClass("vc_active"),this.active_preview=!1},escapeParam:function(e){return e&&e.replace(/"/g,"``")},getPreview:function(e){var t=e.params,a=!1,i={};return _.each(t,function(e,t){"content"!==e.param_name?i[e.param_name]=this.escapeParam(e.value):a=e.value},this),wp.shortcode.atmPreview({tag:e.tag,attrs:i,content:a,type:!1===a?"single":""})},setPreview:function(){var e={params:this.getParams(),tag:o("#vc_atm-tag").val()};o("#vc_shortcode-preview").html(this.getPreview(e)),this.active_preview&&o(this.active_preview).addClass("vc_active")},save:function(e){e&&e.preventDefault&&e.preventDefault(),this.$el.find(".vc_error").removeClass("vc_error"),e={tag:o("#vc_atm-tag").val(),name:o("#vc_atm-name").val(),category:o("#vc_atm-category").val(),description:o("#vc_atm-description").val(),params:this.getParams()},this.isValid(e)?(this.model.save(e),s(window.i18nLocaleVcAutomapper.shortcode_updated,"success"),this.close()):c(this.validationError,this.$el.find("#vc_atm-save"))},validate:function(e){var n,r;if(o(".vc_error,.form-invalid").removeClass("vc_error form-invalid"),n=!1,r={},!e.name)return o("#vc_atm-name").addClass("vc_error"),o("#vc_atm-header-name").parent().addClass("form-invalid"),window.i18nLocaleVcAutomapper.error_shortcode_name_is_required;if(!e.tag||!e.tag.match(/^\S+$/))return o("#vc_atm-tag").addClass("vc_error").parent().addClass("form-invalid"),window.i18nLocaleVcAutomapper.error_enter_valid_shortcode_tag;var s=["param_name","heading","type"];return _.each(e.params,function(t,a){var i=o("#vc_atm-params-list [name=param_name]:eq("+a+")");if("content"===t.param_name&&!i.data("system"))return n=window.i18nLocaleVcAutomapper.error_content_param_not_manually,i.addClass("vc_error"),void i.closest(".vc_param-field").addClass("form-invalid");_.isBoolean(r[t.param_name])&&1==r[t.param_name]&&(i.addClass("vc_error"),i.closest(".vc_param-field").addClass("form-invalid"),n=n||window.i18nLocaleVcAutomapper.error_param_already_exists.replace(/\%s/,t.param_name)),r[t.param_name]=!0,_.each(s,function(e){"hidden"!==t.type&&""===t[e]||"hidden"===t.type&&"heading"!==e&&""===t[e]?(o("#vc_atm-params-list [name="+e+"]:eq("+a+")").addClass("vc_error").closest(".vc_param-field").addClass("form-invalid"),n=n||window.i18nLocaleVcAutomapper.error_enter_required_fields):"param_name"!==e||t[e].match(/^[a-z0-9_]+$/g)||(i.addClass("vc_error").closest(".vc_param-field").addClass("form-invalid"),n=n||window.i18nLocaleVcAutomapper.error_wrong_param_name)},this)},this),n||null},setContentParam:function(e){o(e.currentTarget)[0].checked?(this.addParamField({type:"textarea",heading:"Content",description:"",param_name:"content",value:""}),this.setParamSorting()):this.removeParamField("content"),this.setPreview()},addAllParams:function(){o("#vc_atm-params-list").empty(),_.each(this.model.get("params"),function(e){this.addParamField(e),"content"===e.param_name&&o("#vc_atm-is-container").prop("checked",!0)},this),this.setParamSorting()},getParams:function(){var t=[];return _.each(o(".vc_param"),function(e){e=o(e),t.push({param_name:e.find("[name=param_name]").val(),type:e.find("[name=type]").val(),description:e.find("[name=description]").val(),heading:e.find("[name=heading]").val(),value:e.find("[name=value]").val()})},this),t},addParam:function(e){e&&e.preventDefault&&e.preventDefault(),this.addParamField({type:"",heading:"",description:"",param_name:"",value:""}),this.setPreview()},removeParamField:function(e){o('.vc_param-name[value="'+e+'"]').parents(".vc_param").remove()},addParamField:function(e){var t=o('<div class="vc_param wpb_vc_row'+("content"===e.param_name?" vc_content":"")+'"/>').appendTo("#vc_atm-params-list"),a=vc.template(this.param_template_html,vc.templateOptions.custom);t.html(a(e))},setParamSorting:function(){o("#vc_atm-params-list").sortable({items:"> .vc_param",tolerance:"pointer",handle:".vc_move-param",update:this.setPreview,placeholder:"vc_sortable-placeholder"})},deleteParam:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete_param)&&(o(e.currentTarget).parents(".vc_param").remove(),this.setPreview())},close:function(e){e&&e.preventDefault&&e.preventDefault(),this.model&&o("[data-item-id="+this.model.get("id")+"]").show(),vc_am.current_form=!1,o(".vc_atm-message").remove(),this.remove()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&(this.model.destroy(),this.close())}})).extend({template_html:o("#vc_automapper-form-tpl").html(),getType:function(){return"edit"},initialize:function(){_.bindAll(this,"setPreview")},render:function(){var e=this.model.view;this.model.get("params"),l.__super__.render.call(this);var t=vc.template(this.template_html,vc.templateOptions.custom);return this.$el.html(t(_.extend({shortcode_preview:this.getPreview(this.model.toJSON())},this.model.toJSON()))),this.$el.appendTo(e.$editForm()),e.$widgetTitle().html('<span class="vc_atm-header"><input type="text" name="name" value="" id="vc_atm-header-name" class="vc_header-name"></span><span class="in-widget-title"></span>'),o("#vc_atm-header-name").val(this.model.get("name")),this.addAllParams(),e.$editForm().slideDown(),this},save:function(e){e&&e.preventDefault&&e.preventDefault(),this.model.view.beforeSave(),p.__super__.save.call(this)},close:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form=!1,this.model.view.close()},clear:function(e){e&&e.preventDefault&&e.preventDefault(),confirm(window.i18nLocaleVcAutomapper.are_you_sure_delete)&&(this.model.view.clear(),this.remove())}}),d=Backbone.View.extend({events:{"click #vc_automapper-add-btn":"create",submit:"formSubmit"},className:"vc_atm-form",addFormView:!1,initialize:function(){this.listenTo(vc_am.shortcodes,"add",this.addOne),this.listenTo(vc_am.shortcodes,"reset",this.addAll),this.listenTo(vc_am.shortcodes,"all",this.render),this.$list=o(".vc_automapper-list"),vc_am.shortcodes.fetch()},formSubmit:function(e){e&&e.preventDefault&&e.preventDefault(),_.isObject(e)&&this.addFormView&&!_.isEmpty(e.currentTarget)&&!_.isEmpty(e.currentTarget[0])&&(e=e.currentTarget[0],o(e).is("#vc_atm-shortcode-string")&&this.addFormView.parseShortcode())},addAll:function(e){e.each(function(e){this.addOne(e)},this)},addOne:function(e){e=new v({model:e}),this.$list.append(e.render().el)},create:function(e){e&&e.preventDefault&&e.preventDefault(),vc_am.current_form&&"create"===vc_am.current_form.getType()||(this.addFormView=(new m).render())},render:function(){}});r.length&&new d({el:r})}(window.jQuery),jQuery(document).ready(function(r){function a(e,t,a){var i=new Date;i.setDate(i.getDate()+a),i=encodeURIComponent(t)+(null===a?"":"; expires="+i.toUTCString()),document.cookie=e+"="+i}function e(e){for(var t,a,i=document.cookie.split(";"),n=0;n<i.length;n++)if(t=i[n].substr(0,i[n].indexOf("=")),a=i[n].substr(i[n].indexOf("=")+1),(t=t.replace(/^\s+|\s+$/g,""))==e)return decodeURIComponent(a)}r(".wpb_settings_accordion").accordion({active:!!e("wpb_js_composer_settings_group_tab")&&e("wpb_js_composer_settings_group_tab"),collapsible:!0,change:function(e,t){void 0!==t.newHeader.attr("id")?a("wpb_js_composer_settings_group_tab","#"+t.newHeader.attr("id"),31536e3):a("wpb_js_composer_settings_group_tab","",31536e3)},heightStyle:"content"}),r(".wpb-settings-select-all-shortcodes").on("click",function(e){e.preventDefault(),r(this).parent().parent().find("[type=checkbox]").attr("checked",!0)}),r(".wpb-settings-select-none-shortcodes").on("click",function(e){e.preventDefault(),r(this).parent().parent().find("[type=checkbox]").removeAttr("checked")}),r(".vc_settings-tab-control").on("click",function(e){return e.preventDefault(),!r(this).hasClass("nav-tab-active")&&(r(this).attr("href"),r(".vc_settings-tabs > .nav-tab-active").removeClass("nav-tab-active"),void r(this).addClass("nav-tab-active"))}),r(".vc_settings-tab-content").on("submit",function(){return!0}),r(".vc_show_example").on("click",function(e){return e.preventDefault(),!(e=r(".vc_helper")).is(":animated")&&void e.toggle(100)}),r(".color-control").wpColorPicker(),r("#vc_settings-color-restore-default").on("click",function(e){e.preventDefault(),confirm(window.i18nLocaleSettings.are_you_sure_reset_color)&&(r("#vc_settings-color-action").val("restore_color"),r("#vc_settings-color").attr("action",window.location.href).find("[type=submit]").click())}),r("#wpb_js_use_custom").on("change",function(){this.checked?r("#vc_settings-color").addClass("color_enabled"):r("#vc_settings-color").removeClass("color_enabled")}),r("#vc_settings-updater-button").on("click",function(e){var t=r(this),a=t.data("vcAction"),i=t.parent();return i.addClass("loading"),t.attr("disabled",!0),r.getJSON(window.ajaxurl,{action:"vc_get_"+a+"_url",_vcnonce:window.vcAdminNonce},function(e){e&&e.status?window.location=e.url:(alert("Failed to get response from server. Please try again"),i.removeClass("loading"),t.removeAttr("disabled"))}).error(function(){alert("Failed to get response from server. Please refresh page and try again"),i.removeClass("loading"),t.removeAttr("disabled")}),e.preventDefault(),!1});var t=r("#wpb_csseditor"),i=r("textarea.custom_css.wpb_csseditor");function s(e,t,a,i){i&&r(".vc_atm-message").remove();var n=r('<div class="vc_atm-message '+(t||"")+'" style="display: none;"><p></p></div>');return n.find("p").text(e),_.isUndefined(a)||window.setTimeout(function(){n.fadeOut(500,function(){r(this).remove()})},a),n}t.length&&(window.css_editor=new Vc_postSettingsEditor,window.css_editor.setEditor(i.val()),window.css_editor.getEditor().on("change",function(){i.val(window.css_editor.getValue())})),r("#vc_settings-vc-pointers-reset").on("click",function(e){e.preventDefault(),r.post(window.ajaxurl,{action:"vc_pointer_reset",_vcnonce:window.vcAdminNonce}),r(this).text(r(this).data("vcDoneTxt"))});var o=!1;r("#vc_settings-color").on("submit",function(e){var t,a,i,n;e.preventDefault(),o||(n=r("#submit_btn"),r("#wpb_js_use_custom").prop("checked")&&"restore_color"!==r("#vc_settings-color-action").val()?(o=!0,t=r(this).serializeArray(),a=n.data("vc-less-variables"),i=r('<span class="vc_settings-spinner vc_ui-wp-spinner"></span>'),n.val(window.i18nLocaleSettings.saving),i.insertBefore(n).show(),_.delay(function(){vc.less.build({modifyVars:t,variablesDataLinker:a,lessPath:n.data("vc-less-path"),rootpath:n.data("vc-less-root")},function(e,t){_.isUndefined(e)||_.isUndefined(e.css)?_.isUndefined(t)||(window.console&&window.console.warn&&window.console.warn("build error",t),s(window.i18nLocaleSettings.save_error+". "+t,"error",void 0,!0).insertBefore(n.parent()).fadeIn(500),n.val(window.i18nLocaleSettings.save),o=!1,i.remove()):(r('[name="wpb_js_compiled_js_composer_less"]').val(e.css),e=r("#vc_settings-color"),r.ajax({type:"POST",url:e.attr("action"),data:e.eq(0).serializeArray(),success:function(){s(window.i18nLocaleSettings.saved,"updated",5e3,!0).insertBefore(n.parent()).fadeIn(500),n.val(window.i18nLocaleSettings.save),o=!1,i.remove()},error:function(){s(window.i18nLocaleSettings.form_save_error,"error",void 0,!0).insertBefore(n.parent()).fadeIn(500),n.val(window.i18nLocaleSettings.save),o=!1,i.remove()}}))})},100)):this.submit())})});