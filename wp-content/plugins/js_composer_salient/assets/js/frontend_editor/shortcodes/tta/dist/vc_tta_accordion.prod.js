"use strict";!function(c){window.InlineShortcodeView_vc_tta_accordion=window.InlineShortcodeViewContainer.extend({events:{},childTag:"vc_tta_section",activeClass:"vc_active",defaultSectionTitle:window.i18nLocale.section,initialize:function(){_.bindAll(this,"buildSortable","updateSorting"),window.InlineShortcodeView_vc_tta_accordion.__super__.initialize.call(this)},render:function(){return window.InlineShortcodeViewContainer.__super__.render.call(this),this.content(),this.buildPagination(),this},addControls:function(){return this.$controls=c('<div class="no-controls"></div>'),this.$controls.appendTo(this.$el),this},addElement:function(t){t&&t.preventDefault&&t.preventDefault(),this.addSection("parent.prepend"===c(t.currentTarget).data("vcControl"))},appendElement:function(t){return this.addElement(t)},prependElement:function(t){return this.addElement(t)},addSection:function(t){var e,i={shortcode:this.childTag,parent_id:this.model.get("id"),isActiveSection:!0,params:{title:this.defaultSectionTitle}};for(t&&(vc.activity="prepend",i.order=this.getSiblingsFirstPositionIndex()),vc.builder.create(i),e=vc.builder.models.length-1;0<=e;e--)vc.builder.models[e].get("shortcode");vc.builder.render()},getSiblingsFirstPositionIndex:function(){var t=0,e=vc.shortcodes.sort().findWhere({parent_id:this.model.get("id")});return e&&(t=e.get("order")-1),t},changed:function(){vc.frame_window.vc_iframe.buildTTA(),window.InlineShortcodeView_vc_tta_accordion.__super__.changed.call(this),_.defer(this.buildSortable),this.buildPagination()},updated:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.updated.call(this),_.defer(this.buildSortable),this.buildPagination()},buildSortable:function(){vc_user_access().shortcodeEdit(this.model.get("shortcode"))&&this.$el&&this.$el.find(".vc_tta-panels").sortable({forcePlaceholderSize:!0,placeholder:"vc_placeholder-row",start:this.startSorting,over:function(t,e){e.placeholder.css({maxWidth:e.placeholder.parent().width()}),e.placeholder.removeClass("vc_hidden-placeholder")},items:"> .vc_element",handle:".vc_tta-panel-heading, .vc_child-element-move",update:this.updateSorting})},startSorting:function(t,e){e.placeholder.width(e.item.width())},updateSorting:function(){var i=this;this.getPanelsList().find("> .vc_element").each(function(){var t=c(this),e=t.data("modelId");vc.shortcodes.get(e).save({order:i.getIndex(t)},{silent:!0})}),this.buildPagination()},getIndex:function(t){return t.index()},getPanelsList:function(){return this.$el.find(".vc_tta-panels")},parentChanged:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.parentChanged.call(this),void 0!==vc.frame_window.vc_round_charts&&vc.frame_window.vc_round_charts(this.model.get("id")),void 0!==vc.frame_window.vc_line_charts&&vc.frame_window.vc_line_charts(this.model.get("id"))},buildPagination:function(){},removePagination:function(){this.$el.find(".vc_tta-panels-container").find(" > .vc_pagination").remove()},getPaginationList:function(){var t,e,i,a,o,n=this.model.get("params");return!_.isUndefined(n.pagination_style)&&n.pagination_style.length?(t=this.$el.find("[data-vc-accordion]"),(e=[]).push("vc_general"),e.push("vc_pagination"),i=n.pagination_style.split("-"),e.push("vc_pagination-style-"+i[0]),e.push("vc_pagination-shape-"+i[1]),!_.isUndefined(n.pagination_color)&&n.pagination_color.length&&e.push("vc_pagination-color-"+n.pagination_color),(o=[]).push('<ul class="'+e.join(" ")+'">'),a=this,t.each(function(){var t,e,i=c(this),n=["vc_pagination-item"];i.closest(".vc_tta-panel").hasClass(a.activeClass)&&n.push(a.activeClass),0!==(t=i.attr("href")).indexOf("#")&&(t=""),i.attr("data-vc-target")&&(t=i.attr("data-vc-target")),e='<a href="javascript:;" data-vc-target="'+t+'" class="vc_pagination-trigger" data-vc-tabs data-vc-container=".vc_tta"></a>',o.push('<li class="'+n.join(" ")+'" data-vc-tab>'+e+"</li>")}),o.push("</ul>"),c(o.join(""))):null}})}(window.jQuery);