"use strict";!function(){function a(c){var e,t,n=(t=(e=c).selection.getNode(),"A"===t.tagName&&""===e.dom.getAttrib(t,"href")?t.id||t.name:"");c.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:n},onsubmit:function(e){var t,n,o,a,r,d=e.data.id,i=c;r=t=d,(/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(r)?(o=t,"A"===(a=(n=i).selection.getNode()).tagName&&""===n.dom.getAttrib(a,"href")?(a.removeAttribute("name"),a.id=o,n.undoManager.add()):(n.focus(),n.selection.collapse(!0),n.execCommand("mceInsertContent",!1,n.dom.createHTML("a",{id:o}))),0):(i.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),1))&&e.preventDefault()}})}function r(o){return function(e){for(var t,n=0;n<e.length;n++)(t=e[n]).attr("href")||!t.attr("id")&&!t.attr("name")||t.firstChild||e[n].attr("contenteditable",o)}}var e=tinymce.util.Tools.resolve("tinymce.PluginManager");e.add("anchor",function(e){var t,n,o;(o=e).on("PreInit",function(){o.parser.addNodeFilter("a",r("false")),o.serializer.addNodeFilter("a",r(null))}),(n=e).addCommand("mceAnchor",function(){a(n)}),(t=e).addButton("anchor",{icon:"anchor",tooltip:"Anchor",cmd:"mceAnchor",stateSelector:"a:not([href])"}),t.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",cmd:"mceAnchor"})})}();