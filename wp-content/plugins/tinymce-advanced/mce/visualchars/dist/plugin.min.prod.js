"use strict";function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}!function(t){function u(n){return function(){return n}}function n(){return T}function i(o){function n(){return r}function e(n){return n(o)}var t=u(o),r={fold:function(n,e){return e(o)},is:function(n){return o===n},isSome:y,isNone:p,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:n,orThunk:n,map:function(n){return i(n(o))},each:function(n){n(o)},bind:e,exists:e,forall:e,filter:function(n){return n(o)?r:T},toArray:function(){return[o]},toString:function(){return"some("+o+")"},equals:function(n){return n.is(o)},equals_:function(n,e){return n.fold(p,function(n){return e(o,n)})}};return r}function e(n,e){var o,t="";for(o in n)t+=o;return new RegExp("["+t+"]",e?"g":"")}function o(n){var e,o="";for(e in n)o&&(o+=","),o+="span.mce-"+n[e];return o}function r(n){return'<span data-mce-bogus="1" class="mce-'+M.charMap[n]+'">'+n+"</span>"}function c(o,n){var t,r,e=A(b.fromDom(n),k);O(e,function(n){var e=P(o.dom.encode(C(n)));for(r=o.dom.create("div",null,e);t=r.lastChild;)o.dom.insertAfter(t,n.dom());o.dom.remove(n.dom())})}function a(e,n){var o=e.dom.select(M.selector,n);O(o,function(n){e.dom.remove(n,1)})}function s(n){var e=n.getBody(),o=n.selection.getBookmark(),t=x(n.selection.getNode(),e);a(n,t=void 0!==t?t:e),c(n,t),n.selection.moveToBookmark(o)}function d(n,e){var o,t,r,u=n.getBody(),i=n.selection;e.set(!e.get()),t=n,r=e.get(),t.fire("VisualChars",{state:r}),o=i.getBookmark(),(!0===e.get()?R:I)(n,u),i.moveToBookmark(o)}function m(o){return function(n){var e=n.control;o.on("VisualChars",function(n){e.active(n.state)})}}var f,l,N,v,g,E=tinymce.util.Tools.resolve("tinymce.PluginManager"),p=u(!1),y=u(!0),T=(v={fold:function(n){return n()},is:p,isSome:p,isNone:y,getOr:N=function(n){return n},getOrThunk:l=function(n){return n()},getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:N,orThunk:l,map:n,each:function(){},bind:n,exists:p,forall:y,filter:n,equals:f=function(n){return n.isNone()},equals_:f,toArray:function(){return[]},toString:u("none()")},Object.freeze&&Object.freeze(v),v),h=function(n){return"function"===function(n){if(null===n)return"null";var e=_typeof(n);return"object"===e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e}(n)},O=(Array.prototype.slice,function(n,e){for(var o=0,t=n.length;o<t;o++)e(n[o],o)}),_=(h(Array.from)&&Array.from,function(n){if(null==n)throw new Error("Node cannot be null or undefined");return{dom:u(n)}}),b={fromHtml:function(n,e){var o=(e||t.document).createElement("div");if(o.innerHTML=n,!o.hasChildNodes()||1<o.childNodes.length)throw t.console.error("HTML does not have a single root node",n),new Error("HTML must have a single root node");return _(o.childNodes[0])},fromTag:function(n,e){var o=(e||t.document).createElement(n);return _(o)},fromText:function(n,e){var o=(e||t.document).createTextNode(n);return _(o)},fromDom:_,fromPoint:function(n,e,o){var t,r=n.dom();return(null==(t=r.elementFromPoint(e,o))?T:i(t)).map(_)}},D=(t.Node.ATTRIBUTE_NODE,t.Node.CDATA_SECTION_NODE,t.Node.COMMENT_NODE,t.Node.DOCUMENT_NODE,t.Node.DOCUMENT_TYPE_NODE,t.Node.DOCUMENT_FRAGMENT_NODE,t.Node.ELEMENT_NODE,t.Node.TEXT_NODE),C=(t.Node.PROCESSING_INSTRUCTION_NODE,t.Node.ENTITY_REFERENCE_NODE,t.Node.ENTITY_NODE,t.Node.NOTATION_NODE,void 0!==t.window?t.window:Function("return this;")(),function(n){return n.dom().nodeValue}),w=(g=D,function(n){return n.dom().nodeType===g}),S={" ":"nbsp","­":"shy"},M={charMap:S,regExp:e(S),regExpGlobal:e(S,!0),selector:o(S),charMapToRegExp:e,charMapToSelector:o},k=function(n){var e=C(n);return w(n)&&void 0!==e&&M.regExp.test(e)},A=function e(n,o){var t=[],r=function(n,e){for(var o=n.length,t=new Array(o),r=0;r<o;r++){var u=n[r];t[r]=e(u,r)}return t}(n.dom().childNodes,b.fromDom);return O(r,function(n){o(n)&&(t=t.concat([n])),t=t.concat(e(n,o))}),t},x=function(n,e){for(;n.parentNode;){if(n.parentNode===e)return n;n=n.parentNode}},P=function(n){return n.replace(M.regExpGlobal,r)},R=c,I=a,B=tinymce.util.Tools.resolve("tinymce.util.Delay");E.add("visualchars",function(n){var e,o,t,r,u,i,c,a,f,l=function n(e){function o(){return t}var t=e;return{get:o,set:function(n){t=n},clone:function(){return n(o())}}}(!1);return f=l,(a=n).addCommand("mceVisualChars",function(){d(a,f)}),(e=n).addButton("visualchars",{active:!1,title:"Show invisible characters",cmd:"mceVisualChars",onPostRender:m(e)}),e.addMenuItem("visualchars",{text:"Show invisible characters",cmd:"mceVisualChars",onPostRender:m(e),selectable:!0,context:"view",prependToContext:!0}),u=n,i=l,c=B.debounce(function(){s(u)},300),!1!==u.settings.forced_root_block&&u.on("keydown",function(n){!0===i.get()&&(13===n.keyCode?s(u):c())}),r=l,(t=n).on("init",function(){var n=!t.getParam("visualchars_default_state",!1);r.set(n),d(t,r)}),o=l,{isEnabled:function(){return o.get()}}})}(window);