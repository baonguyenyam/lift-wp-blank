"use strict";!function(){var e,i,o,c,s,l,u,a,r,m,d,f;e=tinymce.util.Tools.resolve("tinymce.PluginManager"),i=function(e,t){e.fire("VisualBlocks",{state:t})},o=function(e){return e.getParam("visualblocks_default_state",!1)},c=function(e){return e.settings.visualblocks_content_css},s=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),u=s.DOM.uniqueId(),a=function(e,t){var n,o=l.toArray(e.getElementsByTagName("link"));0===l.grep(o,function(e){return e.id===u}).length&&(n=s.DOM.create("link",{id:u,rel:"stylesheet",href:t}),e.getElementsByTagName("head")[0].appendChild(n))},r=function(e,t,n){var o=e.dom,s=c(e);a(e.getDoc(),s||t+"/css/visualblocks.css"),o.toggleClass(e.getBody(),"mce-visualblocks"),n.set(!n.get()),i(e,n.get())},m=function(e,t,n){e.addCommand("mceVisualBlocks",function(){r(e,t,n)})},d=function(t,e,n){t.on("PreviewFormats AfterPreviewFormats",function(e){n.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===e.type)}),t.on("init",function(){o(t)&&r(t,e,n)}),t.on("remove",function(){t.dom.removeClass(t.getBody(),"mce-visualblocks")})},f=function(e,t){e.addButton("visualblocks",{active:!1,title:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n(e,t)}),e.addMenuItem("visualblocks",{text:"Show blocks",cmd:"mceVisualBlocks",onPostRender:n(e,t),selectable:!0,context:"view",prependToContext:!0})},e.add("visualblocks",function(e,t){var n=function e(t){function n(){return o}var o=t;return{get:n,set:function(e){o=e},clone:function(){return e(n())}}}(!1);m(e,t,n),f(e,n),d(e,t,n)});function n(n,o){return function(e){var t=e.control;t.active(o.get()),n.on("VisualBlocks",function(e){t.active(e.state)})}}}();