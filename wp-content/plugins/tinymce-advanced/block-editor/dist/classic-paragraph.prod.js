"use strict";function ownKeys(t,e){var o,r=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(o,!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(o).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(o){var r={};function n(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=o,n.c=r,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==_typeof(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([,function(e,t,o){o.r(t);function r(){var e,t,o=U("core/block-editor").getSelectedBlock();o&&(t=(e=o.attributes.content)?(/<p data-tadv-p="keep">/.test(e)&&(e=e.replace(/<p data-tadv-p="keep">/g,"<p>")),J({HTML:e})):$("core/paragraph"),F("core/block-editor").replaceBlocks(o.clientId,t))}var c,n,a,i,l,s,u,d,p,m,f=window.wp,b=window._.debounce,g=window.tadvBlockRegister,y=f.blockEditor,v=(y.BlockControls,y.useBlockProps),k=(f.components.ToolbarGroup,f.element),h=(k.Component,k.createElement),w=(k.Fragment,k.useEffect),_=k.useRef,P=f.keycodes,O=P.BACKSPACE,B=P.DELETE,E=P.F10,C=P.isKeyboardEvent,S=wp.element,j=S.RawHTML,x=S.createElement,T=wp.richText,M=T.join,D=(T.split,T.create),L=T.toHTMLString,N=wp.blocks,R=N.createBlock,K=N.getBlockContent,I={from:(c=[],["core-embed/twitter","core-embed/youtube","core-embed/facebook","core-embed/instagram","core-embed/wordpress","core-embed/soundcloud","core-embed/spotify","core-embed/flickr","core-embed/vimeo","core-embed/animoto","core-embed/cloudup","core-embed/collegehumor","core-embed/crowdsignal","core-embed/dailymotion","core-embed/hulu","core-embed/imgur","core-embed/issuu","core-embed/kickstarter","core-embed/meetup-com","core-embed/mixcloud","core-embed/polldaddy","core-embed/reddit","core-embed/reverbnation","core-embed/screencast","core-embed/scribd","core-embed/slideshare","core-embed/smugmug","core-embed/speaker","core-embed/speaker-deck","core-embed/ted","core-embed/tumblr","core-embed/videopress","core-embed/wordpress-tv","core-embed/amazon-kindle"].forEach(function(n){c.push({type:"block",blocks:[n],transform:function(e){if(!e.url)return R("tadv/classic-paragraph",{content:""});var o,t=K(R(n,e)),r="<p>"+e.url+"</p>";return t&&-1<t.indexOf("</figcaption>")&&t.replace(/<figcaption[^>]*>([\s\S]*?)<\/figcaption>/,function(e,t){o=t}),R("tadv/classic-paragraph",{content:r+=o?"<p>"+o+"</p>":'<p><br data-mce-bogus="1"></p>'})}})}),["core/paragraph","core/image","core/heading","core/gallery","core/list","core/quote","core/code","core/columns","core/freeform","core/html","core/media-text","core/missing","core/preformatted","core/pullquote","core/subhead","core/table","core/text-columns","core/verse"].forEach(function(o){c.push({type:"block",blocks:[o],transform:function(e){var t=K(R(o,e));return(!t||-1<t.indexOf("</div>"))&&(t+='<p><br data-mce-bogus="1"></p>'),R("tadv/classic-paragraph",{content:t})}})}),c.push({type:"raw",priority:21,isMatch:function(){return!0}},{type:"block",isMultiBlock:!0,blocks:["core/paragraph"],transform:function(e){var t=L({value:M(e.map(function(e){var t=e.content;return D({html:t})}),"\u2028"),multilineTag:"p"});return R("tadv/classic-paragraph",{content:t})}},{type:"block",isMultiBlock:!0,blocks:["tadv/classic-paragraph"],transform:function(e){var t=L({value:M(e.map(function(e){var t=e.content;return D({html:t})}),"\u2028")});return R("tadv/classic-paragraph",{content:t})}},{type:"block",isMultiBlock:!0,blocks:["core/freeform"],transform:function(e){var t=L({value:M(e.map(function(e){var t=e.content;return D({html:t})}),"\u2028")});return R("tadv/classic-paragraph",{content:t})}}),c),to:[{type:"block",blocks:["core/freeform"],transform:function(e){return R("core/freeform",e)}},{type:"block",blocks:["core/html"],transform:function(e){return R("core/html",e)}}]},H=wp.i18n.__,q=window.tadvBlockRegister,z={name:"tadv/classic-paragraph",attributes:{content:{type:"string",source:"html"},align:{type:"string"}},category:"common",title:q.classicParagraphTitle,description:q.description,keywords:[H("text")],icon:"welcome-widgets-menus",supports:{className:!1,customClassName:!1,reusable:!0},merge:function(e,t){return{content:(e.content||"")+(t.content||"")}},transforms:I,edit:function(e){var a=e.clientId,i=e.attributes.content,l=e.setAttributes,s=e.onReplace,u=_(!1);return w(function(){var e,t;u.current&&((e=window.tinymce.get("editor-".concat(a)))&&(t=e.getContent()),t!==i&&e.setContent(i||""))},[i]),w(function(){var e=window.wpEditorL10n.tinymce,t=e.baseURL,o=e.suffix;function r(o){var r;i&&o.on("loadContent",function(){return o.setContent(i)}),o.on("blur",function(){r=o.selection.getBookmark(2,!0);var e=document.querySelector(".interface-interface-skeleton__content"),t=e.scrollTop;return l({content:o.getContent()}),o.once("focus",function(){r&&(o.selection.moveToBookmark(r),e.scrollTop!==t&&(e.scrollTop=t))}),!1}),o.on("mousedown touchstart",function(){r=null});var e=b(function(){var e=o.getContent();e!==o._lastChange&&(o._lastChange=e,l({content:e}))},250);o.on("Paste Change input Undo Redo",e),o.on("remove",e.cancel),o.on("keydown",function(e){var t;C.primary(e,"z")&&e.stopPropagation(),e.keyCode!==O&&e.keyCode!==B||(1<(t=o.getBody()).childNodes.length||0!==t.childNodes.length&&(1<t.childNodes[0].childNodes.length||!/^\n?$/.test(t.innerText||t.textContent)))||(s([]),e.preventDefault(),e.stopImmediatePropagation()),e.altKey&&e.keyCode===E&&e.stopPropagation()}),o.on("init",function(){var e=o.getBody();e.ownerDocument.activeElement===e&&(e.blur(),o.focus())})}function n(){var e=window.wpEditorL10n.tinymce.settings;f.oldEditor.initialize("editor-".concat(a),{tinymce:_objectSpread({},e,{inline:!0,content_css:!1,fixed_toolbar_container:"#toolbar-".concat(a),setup:r})})}function c(){"complete"===document.readyState&&n()}return u.current=!0,window.tinymce.EditorManager.overrideDefaults({base_url:t,suffix:o}),"complete"===document.readyState?n():document.addEventListener("readystatechange",c),function(){document.removeEventListener("readystatechange",c),f.oldEditor.remove("editor-".concat(a))}},[]),h("div",v(),h("div",{key:"toolbar",id:"toolbar-".concat(a),className:"block-library-classic__toolbar tma-classic-paragraph__toolbar",onClick:function(){var e=window.tinymce.get("editor-".concat(a));e&&e.focus()},"data-placeholder":g.classicParagraphTitle,onKeyDown:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}}),h("div",{key:"editor",id:"editor-".concat(a),className:"wp-block-freeform block-library-rich-text__tinymce tma-classic-paragraph"}))},save:function(e){var t=e.attributes.content;return x(j,null,t)}},A=wp.data,F=A.dispatch,U=A.select,G=wp.blocks,$=G.createBlock,J=G.rawHandler;p=window.wp,m=window.tadvBlockRegister,p&&m&&(n=p.element.createElement,a=p.i18n.__,p.hooks.addFilter,i=p.editPost.PluginBlockSettingsMenuItem,l=p.plugins.registerPlugin,u=(s=p.blocks).registerBlockType,d=s.setDefaultBlockName,m.classicParagraph?(u("tadv/classic-paragraph",z),l("tadv-add-submenu",{render:function(){return m.hybridMode&&d("tadv/classic-paragraph"),n(i,{allowedBlocks:["tadv/classic-paragraph"],icon:"screenoptions",label:a("Convert to Blocks"),onClick:r})}})):m.hybridMode&&l("tadv-set-default-block",{render:function(){return d("core/freeform"),null}}))}]);